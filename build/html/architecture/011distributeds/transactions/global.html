

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>


<!-- start added 2025-04-14   增加对markdown中公式的支持 -->
<script>
window.MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
    },
    options: {
        ignoreHtmlClass: "tex2jax_ignore|mathjax_ignore",
        processHtmlClass: "tex2jax_process|mathjax_process|math|output_area"
    }
};
</script>
<script defer="defer" src="https://fastly.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- end added 2025-04-14   增加对markdown中公式的支持 -->


<!-- start added 2025-08-06   增加对mermaid图的支持 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        flowchart: { useMaxWidth: true }
    });
});
</script>
<!--  end added 2025-08-06   增加对mermaid图的支持 -->




  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>全局事务(Global Transactions) &mdash; 新溪-gordon V2025.12 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="共享事务(Share Transactions)" href="share.html" />
    <link rel="prev" title="本地事务" href="local.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/jquery.min.js"></script>


<!-- 评论插件 gittalk start -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> -->
<!-- 评论插件 gittalk end -->


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> 新溪-gordon
          

          
          </a>

          
            
            
              <div class="version">
                V2025.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">关键知识</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../010architecture.html">010架构设计</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/normal.html">常用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/normals/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/normals/%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%9A%E5%8A%A1.html">互联网业务</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/normals/tmp.html">临时</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/normals/other.html">其他架构设计</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/cqrs.html">CQRS </a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/crud.html">CRUD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/ddd.html">领域驱动设计</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/api.html">api设计</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/SSO.html">单点登录</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/event_driver.html">事件驱动架构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/network_agent.html">网络代理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/message_bus.html">消息总线</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/mvc_mvp_mvvm.html">MVC MVP MVVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/normals/others/other.html">其他</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/history.html">架构的历史</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/historys/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/historys/01origin_distributed_sys.html">原始分布式时代</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/historys/02monolithic_sys.html">单体系统时代</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/historys/03soa_sys.html">SOA架构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/historys/04microService.html">微服务架构</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/04microServices/normal.html">常用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/04microServices/9feature.html">微服务的九个核心的业务与技术特征</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/04microServices/ServiceMesh.html">ServiceMesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/04microServices/collect.html">微服务架构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/historys/05cloudnative.html">云原生时代——后微服务时代</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/05cloudnatives/collect1.html">云原生</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/05cloudnatives/collect2.html">收集2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/05cloudnatives/12Factor.html">云原生应用的12要素</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/05cloudnatives/distribute_architecture.html">从分布式架构到云原生架构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/historys/06serverless.html">无服务时代</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/historys/06serverless/collect1.html">Serverless</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/architecture_design.html">软件架构设计</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_designs/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_designs/history_design.html">架构设计的历史</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_designs/purpose.html">架构设计目的</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/purposes/1performance.html">复杂度来源-高性能</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/purposes/2availability.html">复杂度来源-高可用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/purposes/3expandability.html">复杂度来源-可扩展性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/purposes/4lowcost.html">复杂度来源-低成本</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/purposes/5security.html">复杂度来源-安全</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/purposes/6scalability.html">复杂度来源-规模</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/purposes/7other.html">其他</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_designs/principle.html">架构设计原则</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_designs/process.html">架构设计流程</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/process/1recognize.html">识别复杂度</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/process/2alternative.html">设计备选方案</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/process/3assess.html">评估&amp;选择备选方案</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_designs/process/4detailed.html">详细方案设计</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/architecture_pattern.html">架构模式</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_patterns/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_patterns/performance.html">高性能架构模式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/normal.html">常用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/1read-write-seperate.html">读写分离</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/2split-db-table.html">分库分表</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/3NoSQL.html">高性能 NoSQL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/4cache.html">高性能缓存架构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/5PPC-TPC.html">单服务器高性能模式: PPC&amp;TPC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/6Reactor-Proactor.html">单服务器高性能模式: Reactor&amp;Proactor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/performances/7slb.html">高性能负载均衡: 分类&amp;架构&amp;算法</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_patterns/availability.html">高可用架构模式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/availabilitys/normal.html">常用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/availabilitys/1CAP.html">CAP理论</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/availabilitys/2FMEA.html">FMEA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/availabilitys/3storage.html">存储高可用架构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/availabilitys/4computing.html">计算高可用架构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/availabilitys/5different-live.html">异地多活</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/availabilitys/6api-failure.html">接口级故障&amp;应对</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/architecture_patterns/expandability.html">可扩展架构模式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/expandabilitys/normal.html">常用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/expandabilitys/1basic-ideas-and-pattern.html">可扩展架构的基本思想和模式</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/expandabilitys/2hierarchical.html">传统可扩展架构-分层架构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/expandabilitys/3soa.html">传统可扩展架构-SOA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/expandabilitys/4microservice.html">微服务架构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/architecture_patterns/expandabilitys/5microkernel.html">微内核架构</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/communication_pattern.html">通信模式communication patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/communication_patterns/normal.html">通用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/communication_patterns/SAP.html">SAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/communication_patterns/theory.html">理论</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/evolution.html">架构演进/重构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/evolutions/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/evolutions/be-microservice.html">对现有系统做微服务化改造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/evolutions/evolution-graph.html">演进架构图</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/graph.html">架构图</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/graphs/normal.html">常用</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/graphs/normals/normal.html">常用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/graphs/normals/color.html">颜色</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../010architectures/graphs/normals/other.html">其他</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/graphs/business.html">业务架构图</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/graphs/c4-model.html">软件架构——C4模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/graphs/%E6%9E%B6%E6%9E%84%E5%9B%BE%E6%8A%80%E5%B7%A7.html">架构图技巧</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../010architectures/EA.html">EA企业级架构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/EAs/TOGAF.html">TOGAF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../010architectures/EAs/Zachman.html">Zachman扎克曼框架</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../011distributed.html">011分布式系统</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../normal.html">常用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../normals/normal.html">分布式系统</a></li>
<li class="toctree-l3"><a class="reference internal" href="../normals/concept.html">并发</a></li>
<li class="toctree-l3"><a class="reference internal" href="../normals/tmp.html">临时</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../theory.html">并发相关理论</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../theorys/CAP.html">并发相关-CAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/PACELC.html">PACELC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/FLP.html">并发相关-FLP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/DLS.html">DLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/CSP.html">并发模型-CSP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/CAS.html">CAS 机制</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/Actor.html">并发模型-Actor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/Gossip.html">Gossip协议</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/BASE.html">BASE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/ACID.html">ACID原则</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/UUID.html">UUID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theorys/consistent_hash.html">一致性hash</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../transaction.html">事务</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="normal.html">通用</a></li>
<li class="toctree-l3"><a class="reference internal" href="local.html">本地事务</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">全局事务(Global Transactions)</a></li>
<li class="toctree-l3"><a class="reference internal" href="share.html">共享事务(Share Transactions)</a></li>
<li class="toctree-l3"><a class="reference internal" href="distribute.html">分布式事务</a><ul>
<li class="toctree-l4"><a class="reference internal" href="distributes/reliable_event_queue.html">可靠事件队列</a></li>
<li class="toctree-l4"><a class="reference internal" href="distributes/SAGA.html">SAGA 事务</a></li>
<li class="toctree-l4"><a class="reference internal" href="distributes/TCC.html">TCC 事务</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../consensus.html">分布式共识</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../consensus/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../consensus/Paxos.html">Paxos算法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../consensus/zab.html">zab协议</a></li>
<li class="toctree-l3"><a class="reference internal" href="../consensus/Raft.html">The Raft Consensus Algorithm </a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../012SoftEngineering.html">012软件工程</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../012SoftEngineerings/normal.html">常用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/normals/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/normals/methodology.html">编程方法论</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/normals/code-quality.html">代码质量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/normals/complexity.html">复杂度</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../012SoftEngineerings/Programming-Spec.html">编程规范</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../012SoftEngineerings/Refactor.html">重构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/normal.html">通用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/5W2H.html">5W2H 分析法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/approach-unit.html">重构手段-单元测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/approach-unit.html#id3">定义</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/approach-unit.html#id4">作用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/approach-unit.html#id5">如何编写单元测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/approach-unit.html#id6">为何难落地执行</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/approach-unit.html#anti-patterns">影响可测试性的 Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/approach-decoupling.html">重构手段-解耦</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../012SoftEngineerings/Refactors/code-standard.html">改善代码质量的编程规范</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../012SoftEngineerings/document.html">设计文档</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../021microservice.html">021微服务架构</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../021microservices/normal.html">常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../021microservices/discovery.html">服务注册&amp;发现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../021microservices/api_gateway.html">API网关</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../021microservices/contract.html">对比</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../021microservices/tmp.html">临时</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../022middle-platform.html">022中台</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../031dataanalysis.html">031数据分析</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../031dataanalysis/normal.html">常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../031dataanalysis/data.html">数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../031dataanalysis/tmp.html">临时</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../041governance.html">041服务治理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../041governances/normal.html">常用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../041governances/normals/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../041governances/normals/technical-debt.html">技术债</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../041governances/normals/anti-fragile.html">反脆弱</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../041governances/normals/code-review.html">Code Review</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../041governances/service_protection.html">服务保护</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../051compiler.html">051编译原理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/normal.html">常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/tool.html">工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80.html">汇编语言</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90.html">词法分析</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90.html">词法分析, 语法分析</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/%E8%AF%AD%E4%B9%89%E5%88%86%E6%9E%90.html">语义分析</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/LLVM.html">LLVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/IR.html">编译期后端技术</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../051compilers/other.html">其他</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../052composition-principle.html">052 计算机组成原理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../052composition-principles/CPU%20%E5%8E%82%E5%95%86.html">CPU 厂商</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../052composition-principles/CPU%20Arch.html">CPU 架构</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../052composition-principles/Arm.html">Arm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../052composition-principles/X86.html">X86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../052composition-principles/API.html">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../053os.html">053操作系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../053os/normal.html">常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../053os/signal.html">signal信号</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../053os/other.html">其他</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../054algorithm.html">054算法</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/normal.html">常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/algorithm.html">经典算法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/algorithms/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/algorithms/nlp.html">NLP相关算法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/algorithms/encrypt.html">加密相关算法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/tree.html">树结构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/trees/b-tree.html">b-树</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/trees/b%2Btree.html">b+树</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/trees/lsm_tree.html">LSM树</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/trees/balanced_binary_tree.html">平衡二叉树</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/trees/red_black_tree.html">红黑树</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/trees/trie-tree.html">Trie 树</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../054algorithms/trees/merkle-tree.html">Merkle 树</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/example.html">实例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/website.html">网站</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/iq.html">智力题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/graph_theory.html">图论</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../054algorithms/other.html">其他算法</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">新溪-gordon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../011distributed.html">011分布式系统</a> &raquo;</li>
        
          <li><a href="../transaction.html">事务</a> &raquo;</li>
        
      <li>全局事务(Global Transactions)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/011distributeds/transactions/global.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            <nav id="local-table-of-contents" role="navigation" aria-labelledby="local-table-of-contents-title">
              <h4 id="local-table-of-contents-title">On This Page</h4>
              <ul>
<li><a class="reference internal" href="#">全局事务(Global Transactions)</a><ul>
<li><a class="reference internal" href="#xa">XA 协议</a></li>
<li><a class="reference internal" href="#id2">两段式提交</a></li>
<li><a class="reference internal" href="#id4">三段式提交</a></li>
<li><a class="reference internal" href="#id6">趣味讲二/三段式提交</a></li>
</ul>
</li>
</ul>

            </nav>
  <table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
<section id="global-transactions">
<h1>全局事务(Global Transactions)<a class="headerlink" href="#global-transactions" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>与本地事务相对的是全局事务，一些资料中也会称之为外部事务（External Transactions）</p></li>
<li><p>这儿的限定定义: 一种适用于单个服务使用多个数据源场景的事务解决方案。</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>理论上，真正的全局事务是没有 “单个服务” 这个约束的，它本来就是 DTP（Distributed Transaction Processing）模型中的概念</p>
</div>
<section id="xa">
<h2>XA 协议<a class="headerlink" href="#xa" title="此标题的永久链接">¶</a></h2>
<p>X/Open XA（XA 是 eXtended Architecture 的缩写）的事务处理框架:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>核心内容是:
  定义了全局的事务管理器（Transaction Manager，用于协调全局事务）
      和局部的资源管理器（Resource Manager，用于驱动本地事务）之间的通讯接口。

XA 接口是双向的，是一个事务管理器和多个资源管理器之间通信的桥梁，
  通过协调多个数据源的动作保持一致，来实现全局事务的统一提交或者统一回滚。
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>XA 协议是主要从数据库本身的协同工作出发的。</p>
</div>
<p>内部 XA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>实例：MySQL 就支持多个数据库引擎之间通过 XA 组成全局事务，
直接向 MySQL 发送 XA START、XA END 、XA PREPARE/COMMIT/ROLLBACK 等指令就可以驱动事务运行。
</pre></div>
</div>
<p>外部 XA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>由各种异构数据源（不同数据库、消息列、缓存、etc，反正只要支持 XA 协议）来组成的 XA 事务，
通过其上的应用层扮演协调者也是普遍行为，
此时协调者与客户端在逻辑上仍是独立的角色，但物理上完全有可能是同一台应用服务器去扮演
</pre></div>
</div>
</section>
<section id="id2">
<h2>两段式提交<a class="headerlink" href="#id2" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>“准备” 和 “提交” 这两个过程，被称为 <a class="reference external" href="https://zh.wikipedia.org/wiki/%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4">“两段式提交”</a> (2 Phase Commit，2PC)协议</p></li>
</ul>
<ol class="arabic">
<li><p>准备阶段:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>又叫做投票阶段。
在这一阶段，协调者询问事务的所有参与者是否准备好提交，
如果已经准备好提交回复 Prepared，否则回复 Non-Prepared。

准备阶段结束代表写完日志。
</pre></div>
</div>
</li>
<li><p>提交阶段:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>又叫做执行阶段
协调者如果在准备阶段收到所有事务参与者回复的 Prepared 消息，就会首先在本地持久化事务状态为 Commit，
  然后向所有参与者发送 Commit 指令，所有参与者立即执行提交操作；
否则，任意一个参与者回复了 Non-Prepared 消息，或任意一个参与者超时未回复，
  协调者都会将自己的事务状态持久化为 “Abort” 之后，向所有参与者发送 Abort 指令，参与者立即执行回滚操作。
</pre></div>
</div>
</li>
</ol>
<p>我的理解:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>准备阶段:
  也可能持久化了操作日志
提交阶段:
  「参与者」只是在本地持久化了一条「Commit Record」日志
  所以很轻量，剩下的工作可以通过「Commit Log」来实现

  当然如果失败回滚，这块就变成一个重负载操作了
</pre></div>
</div>
<p>两阶段提交协议，保证一致性两个前提条件:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. 必须假设网络在提交阶段这个短时间内是可靠的，即提交阶段不会丢失消息
      两段式提交中投票阶段失败了可以补救（回滚），
      而提交阶段失败了无法补救（不再改变提交或回滚的结果，只能等崩溃的节点重新恢复），
      因而提交阶段的耗时应尽可能短，这也是为了尽量控制网络风险的考虑。
2. 必须假设因为网络分区、机器崩溃或者其他原因而导致失联的节点最终能够恢复，不会永久性地处于失联状态
      由于在准备阶段已经写入了完整的重做日志，
      所以当失联机器一旦恢复，就能够从日志中找出已准备妥当但并未提交的事务数据，
      再向协调者查询该事务的状态，确定下一步应该进行提交还是回滚操作。

数据库来说
  提交阶段: 相对轻量，仅仅是持久化一条 Commit Record 而已，通常能够快速完成。
  回滚阶段: 相对耗时，收到 Abort 指令时，需要根据回滚日志清理已提交的数据，这可能是相对重负载操作。
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>提到的协调者和参与者，通常都是由数据库自己来扮演的，不需要应用程序介入，应用程序相对于数据库来说只扮演客户端的角色。注意，这点是和分布式事务的区别。也可以说：全局事务是针对「分布式数据库」的，而分布式事务是的针对分布式服务的。</p>
</div>
<figure class="align-default" id="id8">
<img alt="https://img.zhaoweiguo.com/knowledge/images/architectures/distributes/transaction2.jpg" src="https://img.zhaoweiguo.com/knowledge/images/architectures/distributes/transaction2.jpg" />
<figcaption>
<p><span class="caption-text">两段式提交</span><a class="headerlink" href="#id8" title="此图像的永久链接">¶</a></p>
</figcaption>
</figure>
<p>两段式提交的原理很简单，也不难实现，但有三个非常明显的缺点:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. 单点问题
   协调者在两段提交中具有举足轻重的作用
   协调者等待参与者回复时可以有超时机制，允许参与者宕机，但参与者等待协调者指令时无法做超时处理。
   一旦协调者宕机，所有参与者都会受到影响。
   如果协调者一直没有恢复，没有正常发送 Commit 或者 Rollback 的指令，那所有参与者都必须一直等待。

2. 性能问题
    两段提交过程中，所有参与者相当于被绑定成为一个统一调度的整体
    期间要经过两次远程服务调用、三次数据持久化
      （准备阶段写重做日志，协调者做状态持久化，提交阶段在日志写入 Commit Record）
    整个过程将持续到参与者集群中最慢的那一个处理操作结束为止。
    这就决定了两段式提交的性能通常都比较差。

3. 一致性风险
    当网络稳定性和宕机恢复能力的假设不成立时，两段式提交可能会出现一致性问题。
</pre></div>
</div>
<p>“单点问题” 中为啥 “参与者等待协调者指令时无法做超时处理”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>因为准备阶段结束，所有参与者都回复了 Prepared 的那一刻起，整个集群的数据状态就无法再改变了。

你可以想像一下这个情景：
  假设某个参与者在应答 Prepared 消息后从网络中断开，丢失了协调者的后续指令，
  如果允许超时，超时之后它应该如何处理呢？
  如果它选择 Rollback 了数据，万一协调者收到所有 Prepared 消息后，
    发出的是 Commit 指令，那其他参与者会提交事务，这样该节点超时后重新上线，
    它后超时回滚掉那部分数据就与其他参与者的不一致了。
  反之，超时提交也是不合适的，因为怕协调者发出的是 Abort 指令。
</pre></div>
</div>
</section>
<section id="id4">
<h2>三段式提交<a class="headerlink" href="#id4" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://zh.wikipedia.org/wiki/%E4%B8%89%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4">“三段式提交”</a> (3 Phase Commit，3PC）协议: 为了解决两段式提交的单点问题、性能问题和数据一致性问题</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>新增的 CanCommit 是一个询问阶段，协调者让每个参与的数据库根据自身状态，评估该事务是否有可能顺利完成。在事务需要回滚的场景中，三段式的性能通常要比两段式好很多，但在事务能够正常提交的场景中，两段式和三段式提交的性能都很差，三段式因为多了一次询问，性能还要更差一些。</p>
</div>
<p>三段式提交把原本的两段式提交的准备阶段再细分为两个阶段:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CanCommit
PreCommit
DoCommit

将准备阶段一分为二的理由是，这个阶段是重负载的操作，
一旦协调者发出开始准备的消息，每个参与者都将马上开始写重做日志，这时候涉及的数据资源都会被锁住。
如果此时某一个参与者无法完成提交，相当于所有的参与者都做了一轮无用功。
</pre></div>
</div>
<figure class="align-default" id="id9">
<img alt="https://img.zhaoweiguo.com/knowledge/images/architectures/distributes/transaction3.jpg" src="https://img.zhaoweiguo.com/knowledge/images/architectures/distributes/transaction3.jpg" />
<figcaption>
<p><span class="caption-text">三段式提交</span><a class="headerlink" href="#id9" title="此图像的永久链接">¶</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>因为询问阶段使得事务失败回滚的概率变小了，所以在三段式提交中，如果协调者在 PreCommit 阶段开始之后发生了宕机，参与者没有能等到 DoCommit 的消息的话，默认的操作策略将是提交事务而不是回滚事务或者持续等待。这就相当于避免了协调者的单点问题，但同时也引入了一致性问题（详见上图）。</p>
</div>
<p>三段式提交对单点问题和回滚时的性能问题有所改善，但是对一致性风险问题并未有任何改进，甚至是增加了面临的一致性风险:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>进入 PreCommit 阶段之后，协调者在DoCommit阶段发出指令 Abort，
而此时因为网络问题，有部分参与者直至超时都没能收到协调者的 Abort 指令的话，
这些参与者将会错误地提交事务，这就产生了不同参与者之间数据不一致的问题。
</pre></div>
</div>
</section>
<section id="id6">
<h2>趣味讲二/三段式提交<a class="headerlink" href="#id6" title="此标题的永久链接">¶</a></h2>
<p>题目:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>学校组织知识竞赛，全部学生（参与者）以一组为单位参加比赛，由一个监考老师（协调者）负责监考。
考试分为考卷和答题卡，学生必须先在十分钟内把答案写在考卷上（记录日志），
  然后把答案涂到答题卡上（提交事务）
</pre></div>
</div>
<p>趣味讲二段式提交:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. 准备阶段

  老师宣布：“开始填写考卷，时间十分钟”。
  十分钟内，写好考卷的学生就回答：Prepared
      十分钟一到，动作慢，还没写好学生，就回答：Non-Prepared
      中间有同学不舒服，可以直接回答：Non-Prepared

2. 提交阶段

  1.1 全部学生都回答 Prepared
      老师就会在笔记本上记下，“开始填答题卡”（Commit）
      然后对所有的学生说：“开始填答题卡”（发送 Commit 指令）

      学生听到指令后，就开始根据考卷去涂答题卡:
      2.1 所有学生涂完答题卡并都通知老师
          老师收到所有人涂完答题卡的回答，事务完成
      2.2 3分钟后老师还没有收到涂完的回答
          老师会再次通知学生去涂答题卡

      如果这时老师有事出去，所有同学都会停下来等着老师回来
        因为不知道老师回来后会让大家涂答题卡还是放弃这次考试

  1.2 如果「准备阶段」有学生回答 Non-Prepared
      老师通知所有学生放弃此次答卷
      并把答卷用涂改液涂成空白状态
</pre></div>
</div>
<p>趣味讲三段式提交:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. CanCommit 阶段
    老师先给学生看一下考卷，问问学生能不能在十分钟内做完。
    如果有学生说没信心做完，老师通知所有学生放弃此次答卷。
2. PreCommit 阶段
    如果学生都说能做完，老师就宣布：“开始填写考卷，时间十分钟”，和两段式提交的准备阶段一样
3. DoCommit 阶段
    和两段式提交的提交阶段基本一样
    不同的点在，如果这时老师有事出去，所以没有通知同学去涂答题卡
      用户在完成PreCommit 阶段后3分钟自己去涂答题卡
    如果老师5分钟后回来，发现有个在PreCommit 阶段没成功，于是老师通知大家放弃此次答卷，但：
      有些同学已经涂完答题卡，并上交后离开
      另一些同学放弃这次考试，造成了不一致问题
</pre></div>
</div>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="share.html" class="btn btn-neutral float-right" title="共享事务(Share Transactions)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="local.html" class="btn btn-neutral" title="本地事务" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  
  <div id="gitalk-container"></div>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2025, 新溪-gordon.

    </p>
  </div>
  <div>备案号 <a href="http://www.beian.miit.gov.cn">京ICP备16018553号</a></div><div>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a></div>. 


</footer>

<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?042289284b8eb33866001347a3e0b129";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>     
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'V2025.12',
            LANGUAGE:'zh-CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });


      // var gitalk = new Gitalk({
      //         clientID: '565177626b5d46427009',
      //         clientSecret: 'b2a36e67e1d2a73e43667f46d571c2624f8e1026',
      //         repo: 'knowledge',
      //         owner: 'zhaoweiguo',
      //         admin: ['zhaoweiguo'],
      //         id: location.pathname,      // Ensure uniqueness and length less than 50
      //         distractionFreeMode: false  // Facebook-like distraction free mode
      //       })
      // gitalk.render('gitalk-container')

  </script>


<script type="text/javascript" src="../../_static/js/table-of-contents-sidebar.js"></script>
<!-- <script type="text/javascript" src="https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/table-of-contents-sidebar.js"></script> -->
<script type="text/javascript">
    window.onload = function(e){
        TableOfContents.init({
            basePath: "https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/",
            querySelector: "body" // or other css querySelector
        });
    }
</script> 

</body>
</html>