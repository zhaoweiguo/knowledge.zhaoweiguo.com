三类DNS
#######


权威 DNS
========

定义::

    处于 DNS 服务端的一套系统，该系统保存了相应域名的权威信息。
    权威 DNS 即通俗上 “这个域名我说了算” 的服务器。

权威DNS是可以级联授权的::

    即是经过上一级权威DNS把解析授权转授给其他人，如:
    1. 13个root权威DNS把.com域名转授给COM顶级权威服务器
    2. COM顶级服务器可以授权zhaoweiguo.com这个域名的的权威服务器为NS.ABC.COM
    3. 同时NS.ABC.COM还可以把授权转授给NS.DDD.COM
    这样NS.DDD.COM就成了ABC.COM实际上的权威服务器了

平时我们解析域名的结果都源自权威DNS。比如::

    dns.com的权威DNS服务器就是:
        帝恩思的ns1.dns.com ns2.dns.com
    ali云的权威DNS服务器是:
        DNS9.HICHINA.COM
        DNS10.HICHINA.COM
    dnspod权威dns:
        NS3.DNSV3.COM
        NS3.DNSV3.COM

CDN DNS::

    本质上讲也是一种权威 DNS，主要在 CDN 的业务场景中提供流量调度功能。
    用户将域名 CNAME 或者直接 NS 托管到 CDN DNS
      CDN DNS 进一步做智能调度返回一个离用户最近的接入节点。
    用户访问接入节点，享受 CDN 提供的缓存、加速、以及防攻击服务。


递归 DNS
========

定义::

    又叫 local dns。
    负责接受用户对任意域名查询，并返回结果给用户。
    递归DNS缓存结果以避免重复向上查询。

作用::

    递归 DNS 可以理解为是一种功能复杂些的 resolver
    其核心功能一个是缓存、一个是递归查询。

操作流程::

    收到域名查询请求后其首先看本地缓存是否有记录
    如果没有则一级一级的查询根、顶级域、二级域、三级域(权威DNS)…… 
    直到获取到结果然后返回给用户。
    日常上网中运营商分配的 DNS 即这里所说的递归 DNS。

    平时使用最多的就是这类DNS，对公众开放服务，一般由网络运营商提供，自己可以架递归DNS提供服务


公共 DNS::

    公共 DNS 类似于运营商的 local dns，本质上讲是一种递归解析服务
    与运营商 DNS 不同的是，公共 DNS 一般以一个或两个非常容易记住的 IP 方式给所有用户提供统一服务。公共 DNS 相对于运营商 DNS 的优势主要在无劫持、更快、更稳定、更安全等。

公共DNS实例::

    谷歌: 8.8.8.8和8.8.4.4
    114: 114.114.114.114和114.114.115.115
    百度: 180.76.76.76


.. figure:: https://img.zhaoweiguo.com/uPic/2023/01/WlneMp.jpg

   国内常见的递归DNS





转发DNS
=======

定义::

    负责接受用户查询，并返回结果给用户。
    但此结果不是按标准域名解析过程得到的，而是直接把递归DNS的结果转发给用户。

作用::

    他主要使用在没有直接的互联网连接，但可以连接到一个递归DNS那里，这时使用转发DNS就比较合适。

    其缺陷是：
    直接受递归DNS的影响，服务品质较差。
    如: 部分路由器里面的DNS就是这一类，如: 192.168.1.1










