

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>


<!-- start added 2025-04-14   增加对markdown中公式的支持 -->
<script>
window.MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
    },
    options: {
        ignoreHtmlClass: "tex2jax_ignore|mathjax_ignore",
        processHtmlClass: "tex2jax_process|mathjax_process|math|output_area"
    }
};
</script>
<script defer="defer" src="https://fastly.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- end added 2025-04-14   增加对markdown中公式的支持 -->


<!-- start added 2025-08-06   增加对mermaid图的支持 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        flowchart: { useMaxWidth: true }
    });
});
</script>
<!--  end added 2025-08-06   增加对mermaid图的支持 -->




  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hub Python Library &mdash; 新溪-gordon V2026.01 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="Datasets" href="Datasets.html" />
    <link rel="prev" title="Hugging Face Hub" href="huggingface_hub.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>
  <script src="../../../_static/js/jquery.min.js"></script>


<!-- 评论插件 gittalk start -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> -->
<!-- 评论插件 gittalk end -->


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> 新溪-gordon
          

          
          </a>

          
            
            
              <div class="version">
                V2026.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">AI</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../normal.html">1. 常用</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/normal.html">1.1. 常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/AIGC.html">1.2. AIGC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/ml.html">1.3. 机器学习machine learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/bi.html">1.4. BI(Business Intelligence)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/deep_learning.html">1.5. 深度学习</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../normals/deep_learnings/normal.html">1.5.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../normals/deep_learnings/history.html">1.5.2. 历史</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/monitor.html">1.6. monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/algorithm.html">1.7. 相关算法</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/tool.html">1.8. 工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/question.html">1.9. 常见问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/%E6%9C%BA%E5%99%A8%E4%BA%BA.html">1.10. 机器人领域</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../theory.html">2. 理论</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../theories/normal.html">2.1. 通用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/normals/%E7%BB%8F%E5%85%B8%E8%AE%A4%E7%9F%A5%E7%A7%91%E5%AD%A6.html">2.1.1. 经典认知科学</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../theories/key.html">2.2. 关键定义</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/Recommenders/CF%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4.html">2.2.1. 协同过滤（Collaborative Filtering, CF）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/Recommenders/MF%E6%A6%82%E7%8E%87%E7%9F%A9%E9%98%B5%E5%88%86%E8%A7%A3.html">2.2.2. MF(Matrix Factorization，矩阵分解)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/Recommenders/PMF%E6%A6%82%E7%8E%87%E7%9F%A9%E9%98%B5%E5%88%86%E8%A7%A3.html">2.2.3. PMF（Probabilistic Matrix Factorization，概率矩阵分解）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/Recommenders/Two-TowerModels%E5%8F%8C%E5%A1%94%E6%A8%A1%E5%9E%8B.html">2.2.4. Two-Tower Models（双塔模型）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/Parallelism/normal.html">2.2.5. 通用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/Parallelism/PipelineParallelism.html">2.2.6. Pipeline Parallelism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/Parallelism/TensorParallesim.html">2.2.7. Tensor Parallesim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/activation_GELU.html">2.2.8. 激活函数-GELU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/activation_Leaky-ReLU.html">2.2.9. 激活函数-Leaky ReLU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/activation_RELU.html">2.2.10. 激活函数-ReLU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/activation_SiLU.html">2.2.11. 激活函数-SiLU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/activation_Sigmoid.html">2.2.12. 激活函数-Sigmoid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/activation_Tanh.html">2.2.13. 激活函数-Tanh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/normalization_L1.html">2.2.14. 归一化-L1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/normalization_L2.html">2.2.15. 归一化-L2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/probabilistic_Softmax.html">2.2.16. 概率分布-Softmax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/probabilistic_Sparsemax.html">2.2.17. 概率分布-Sparsemax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_activations/probabilistic_logSoftmax.html">2.2.18. 概率分布-logsoftmax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/classify_cross_entropy.html">2.2.19. 损失函数-分类-cross-entropy(交叉熵)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/classify_NLL.html">2.2.20. 损失函数-分类-负对数似然损失NLL Loss</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/classify_log.html">2.2.21. 损失函数-分类-对数损失(Log Loss)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/classify_kl.html">2.2.22. 损失函数-分类-KL 散度(KL Loss)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/regression_MSE.html">2.2.23. 损失函数-回归-均方误差(MSE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/regression_MAE.html">2.2.24. 损失函数-回归-平均绝对误差(MAE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/regression_Huber.html">2.2.25. 损失函数-回归-Huber 损失</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/regression_log_cosh.html">2.2.26. 损失函数-回归-对数余弦损失(Log-Cosh Loss)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_loss/%E6%9D%83%E9%87%8D%E8%A1%B0%E5%87%8F-L2%E6%AD%A3%E5%88%99%E5%8C%96.html">2.2.27. 权重衰减(L2正则化)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_optims/GD.html">2.2.28. GD(梯度下降)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_optims/SGD.html">2.2.29. SGD随机梯度下降</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_optims/RMSprop.html">2.2.30. RMSprop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_optims/Adam.html">2.2.31. Adam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_optims/AdamW.html">2.2.32. AdamW</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/func_optims/Momentum.html">2.2.33. Momentum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/ners/HMM-%E9%9A%90%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB%E6%A8%A1%E5%9E%8B.html">2.2.34. HMM-隐马尔可夫模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/ners/WWM-%E5%85%A8%E8%AF%8DMask.html">2.2.35. WWM-Whole Word Masking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/ners/CRF-%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BA.html">2.2.36. CRF-条件随机场</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dls/ANN.html">2.2.37. ANN(NN)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dls/DNN-%E6%B7%B1%E5%BA%A6%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C.html">2.2.38. 深度神经网络(Deep Neural Network, DNN)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dls/CNN-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C.html">2.2.39. 卷积神经网络(Convolutional Neural Network, CNN)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dls/RNN-%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91.html">2.2.40. RNN: 循环神经网(Recurrent Neural Network, RNN)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dls/LSTM-%E9%95%BF%E7%9F%AD%E6%97%B6%E8%AE%B0%E5%BF%86.html">2.2.41. LSTM: 长短时记忆(Long Short Term Memory, LSTM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/propagation.html">2.2.42. 前向/反向传播</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/LinearLayer.html">2.2.43. Linear Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/FFN.html">2.2.44. Feedforward Network-前馈网络</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/LayerNorm.html">2.2.45. LayerNorm(层归一化)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/WeightTying.html">2.2.46. Weight Tying</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/GreedyDecoding.html">2.2.47. Greedy Decoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/ImageGrounding.html">2.2.48. Image Grounding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/dl_theorys/Perplexity.html">2.2.49. Perplexity(PPL)困惑度</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/3Ds/ManhattanWorld%E6%9B%BC%E5%93%88%E9%A1%BF%E4%B8%96%E7%95%8C.html">2.2.50. Manhattan World(曼哈顿世界)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/3Ds/HoughTransform%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2.html">2.2.51. Hough Transform（霍夫变换）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/3Ds/PolarCoordinateSystem%E6%9E%81%E5%9D%90%E6%A0%87%E8%A1%A8%E7%A4%BA%E6%B3%95.html">2.2.52. 极坐标表示法(Polar Coordinate System)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/3Ds/GaussianSphere%E9%AB%98%E6%96%AF%E7%90%83.html">2.2.53. Gaussian Sphere（高斯球）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/3Ds/edge_direction%E8%BE%B9%E7%BC%98%E6%96%B9%E5%90%91.html">2.2.54. 边缘方向 Edge Direction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/3Ds/NormalVector%E6%B3%95%E5%90%91%E9%87%8F.html">2.2.55. NormalVector法向量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/AllReduce.html">2.2.56. AllReduce</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/BPE.html">2.2.57. BPE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/Embedding%E6%A8%A1%E5%9E%8B.html">2.2.58. Embedding 模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/K-Means%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95.html">2.2.59. K-Means聚类算法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/LLM.html">2.2.60. LLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/deeplearning.html">2.2.61. 深度学习相关</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/other.html">2.2.62. 其他</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/%E5%88%A4%E5%88%AB%E5%BC%8F%E6%A8%A1%E5%9E%8Bvs%E7%94%9F%E6%88%90%E5%BC%8F%E6%A8%A1%E5%9E%8B.html">2.2.63. 判别式模型vs生成式模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E7%A9%BA%E9%97%B4.html">2.2.64. 欧几里得空间(Euclidean space)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/keys/others/%E7%9F%A2%E9%87%8F%E5%8C%96%E8%AE%A1%E7%AE%97.html">2.2.65. 矢量化计算(Vectorize calculations)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../theories/tmp.html">2.3. 临时</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/ReAct.html">2.3.1. ReAct框架</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/Reflection.html">2.3.2. Reflection反思</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/math.html">2.3.3. 数学</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/bag-of-words.html">2.3.4. bag-of-words</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/word2vec.html">2.3.5. Word2Vec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/doc2vec.html">2.3.6. Doc2Vec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/FastText.html">2.3.7. FastText</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/LDA.html">2.3.8. LDA-Latent Dirichlet Allocation(潜在狄利克雷分配)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/overfitting-underfitting.html">2.3.9. overfitting&amp;underfitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/RAG.html">2.3.10. RAG</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/Agent.html">2.3.11. Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/LLM.html">2.3.12. LLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/prompt_engineering.html">2.3.13. Prompt Engineering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/finetune.html">2.3.14. LLM调优(finetune)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/Workflow.html">2.3.15. Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../theories/tmps/0normal.html">2.3.16. 通用</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../LLM.html">3. 大模型</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/normal.html">3.1. 常用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/normals/normal.html">3.1.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/normals/package.html">3.1.2. 依赖安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/normals/encoder.html">3.1.3. 编码-解码器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/normals/usage.html">3.1.4. 使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/normals/tmp.html">3.1.5. 临时</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/model.html">3.2. 著名模型</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/Qwen3.html">3.2.1. Qwen3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/DeepSeek.html">3.2.2. DeepSeek-R1-推理模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/LLaMA.html">3.2.3. LLaMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/ChatGLM.html">3.2.4. ChatGLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/BERT.html">3.2.5. BERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/OpenAI.html">3.2.6. OpenAI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/BART.html">3.2.7. BART</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/T5.html">3.2.8. T5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/ChatRWKV.html">3.2.9. ChatRWKV</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/Open-Assistant.html">3.2.10. Open-Assistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/models/OpenGVLab.html">3.2.11. OpenGVLab</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/finetune.html">3.3. 调优</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/Quantization%E9%87%8F%E5%8C%96.html">3.4. 模型量化(Quantization)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/Quantizations/normal.html">3.4.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/Quantizations/GGUF.html">3.4.2. GGUF 文件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/fileformat.html">3.5. 文件格式</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/fileformats/normal.html">3.5.1. 通用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/fileformats/GGML.html">3.5.2. GGML系列文件格式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/fileformats/ONNX.html">3.5.3. ONNX</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../LLMs/fileformats/ONNXs/normal.html">常用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../LLMs/fileformats/ONNXs/ONNX.html">ONNX</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../LLMs/fileformats/ONNXs/onnxruntime.html">onnxruntime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../LLMs/fileformats/ONNXs/skl2onnx.html">skl2onnx</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/fileformats/NCNN.html">3.5.4. NCNN</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/openai.html">3.6. 商业项目</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/openais/normal.html">3.6.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/openais/openai.html">3.6.2. OpenAI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/prompt.html">3.7. Prompt 提示词</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/prompts/demo_chinese.html">3.7.1. 中文</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/prompts/demo_english.html">3.7.2. English</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/prompts/skill.html">3.7.3. 示例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../LLMs/Android.html">3.8. Android版LLM相关</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/Androids/normal.html">3.8.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/Androids/Android%E7%89%88%E9%83%A8%E7%BD%B2.html">3.8.2. Android版部署</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../LLMs/Androids/GPU.html">3.8.3. GPU</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../RAG.html">4. RAG相关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../NLP.html">5. NLP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../NLPs/normal.html">5.1. 常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../NLPs/preprocess.html">5.2. 预处理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/preprocesses/normal.html">5.2.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/preprocesses/%E5%85%B3%E9%94%AE%E8%AF%8D%E6%8F%90%E5%8F%96.html">5.2.2. 关键词提取</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/preprocesses/%E5%88%86%E8%AF%8D.html">5.2.3. 分词</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/preprocesses/%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90.html">5.2.4. 情感分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/preprocesses/%E6%96%87%E6%9C%AC%E8%A1%A8%E7%A4%BA.html">5.2.5. 文本表示</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/preprocesses/%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6.html">5.2.6. 注意力机制</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/preprocesses/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B.html">5.2.7. 语言模型</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../NLPs/NER.html">5.3. NER-命名实体识别</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/NERs/normal.html">5.3.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/NERs/seq-label.html">5.3.2. 序列标注</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/NERs/BiLSTM%2BCRF.html">5.3.3. BiLSTM+CRF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/NERs/history.html">5.3.4. 历史</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../NLPs/summary.html">5.4. 总结-摘要</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../NLPs/summarys/normal.html">5.4.1. 通用</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../library.html">6. 函数库</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/normal.html">6.1. 常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/Image.html">6.2. Image图像处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/Video.html">6.3. Video视频</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/IPython.html">6.4. IPython</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/IPythons/normal.html">6.4.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/IPythons/magic.html">6.4.2. 魔法命令 </a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/IPythons/display.html">6.4.3. display函数</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/Jupyter.html">6.5. Jupyter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/NumPy.html">6.6. NumPy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/NumPys/normal.html">6.6.1. 通用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/NumPys/Ndarray.html">6.6.2. Ndarray 对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/NumPys/function.html">6.6.3. 通用函数</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/Pandas.html">6.7. Pandas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/normal.html">6.7.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/example_subset.html">6.7.2. 实例-subset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/example_analysis.html">6.7.3. 实例-统计分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/example_sql.html">6.7.4. 利用pandas实现SQL操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/example_default_value.html">6.7.5. 实例-缺失值的处理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/example_multi_index.html">6.7.6. 多层索引的使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/practice.html">6.7.7. 实践</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Pandas/practices/practice_2012ObamaElect.html">实践-2012年奥巴马总统连任选举</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/api_input_output.html">6.7.8. API-输入输出</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/api_General.html">6.7.9. API-General functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/api_Series.html">6.7.10. API-Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/api_DataFrame.html">6.7.11. API-DataFrame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Pandas/api_Index.html">6.7.12. API-index</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/Matplotlib.html">6.8. Matplotlib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Matplotlibs/normal.html">6.8.1. 基本</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Matplotlibs/install.html">6.8.2. 安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Matplotlibs/pyplot.html">6.8.3. pyplot </a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Matplotlibs/matplotlib.patches.html">6.8.4. matplotlib.patches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Matplotlibs/example.html">6.8.5. 实例</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/plot.html">折线图plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/bar.html">条形图bar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/hist.html">直方图hist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/scatter.html">散点图scatter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/stackplot.html">面积图stackplot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/pie.html">饼图pie</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/box.html">箱型图box</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/Matplotlibs/examples/multi.html">多图合并multi</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Matplotlibs/pylab.html">6.8.6. pylab子包</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/SciPy.html">6.9. SciPy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/SciPys/normal.html">6.9.1. 常用</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/sklearn.html">6.10. sklearn</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/sklearns/normal.html">6.10.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/sklearns/supervised.html">6.10.2. 监督学习</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../libraries/sklearns/superviseds/glm.html">广义线性模型</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/sklearns/unsupervised.html">6.10.3. 无监督学习</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/statsmodels.html">6.11. statsmodels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/OpenCV.html">6.12. OpenCV</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/OpenCVs/normal.html">6.12.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/OpenCVs/example.html">6.12.2. 实例</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/OpenCVs/struct.html">6.12.3. 代码类结构</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/Seaborn.html">6.13. Seaborn</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/Seaborns/normal.html">6.13.1. 常用</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/jieba.html">6.14. jieba中文分词</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/gensim.html">6.15. gensim: 文本主题建模和相似性分析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/gensims/normal.html">6.15.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/gensims/Core_Tutorials.html">6.15.2. Core Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/gensims/Tutorials.html">6.15.3. Tutorials: Learning Oriented Lessons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../libraries/gensims/How-to_Guides.html">6.15.4. How-to Guides: Solve a Problem</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../libraries/LAC.html">6.16. LAC-百度词法分析工具</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../framework.html">7. 学习框架</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../normal.html">7.1. 常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytorch.html">7.2. PyTorch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pytorchs/normal.html">7.2.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pytorchs/nn.html">7.2.2. nn模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pytorchs/PyTorch.html">7.2.3. PyTorch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pytorchs/ExecuTorch.html">7.2.4. ExecuTorch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pytorchs/torchrun.html">7.2.5. torchrun (Elastic Launch)</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../huggingface.html">7.3. huggingface</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../normal.html">7.3.1. 常用</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="huggingface_hub.html">Hugging Face Hub</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Hub Python Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="Datasets.html">Datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="Text_Generation_Inference_main.html">TGI: Text Generation Inference</a></li>
<li class="toctree-l4"><a class="reference internal" href="Evaluate.html">Evaluate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Transformers.html">7.3.2. Transformers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Transformers/Transformers.html">Transformers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Transformers/Transformers_V4.45.2.html">Transformers 4.45.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tokenizers_V0.13.3.html">7.3.3. Tokenizers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PEFT.html">7.3.4. PEFT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../PEFT/PEFT.html">PEFT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../PEFT/PEFT_V0.13.0.html">PEFT 0.13.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Accelerate.html">7.3.5. Accelerate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TRL.html">7.3.6. TRL - Transformer Reinforcement Learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collect.html">7.3.7. 收集</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../collects/resources.html">resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collects/model.html">model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collects/blog_decoding-methods.html">博文: decoding methods of LLM with transformers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../vLLM.html">7.4. vLLM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../vLLMs/normal.html">7.4.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vLLMs/vLLM_doc.html">7.4.2. vLLM官方文档</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../llama.cpp.html">7.5. llama.cpp框架</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../llama.cpps/normal.html">7.5.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../llama.cpps/llama-cpp-python.html">7.5.2. Python bindings for llama.cpp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../DeepSpeed.html">7.6. DeepSpeed</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../DeepSpeeds/huggingface.html">7.6.1. huggingface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../DeepSpeeds/ZeRO.html">7.6.2. Zero Redundancy Optimizer (ZeRO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../DeepSpeeds/deepspeed_doc.html">7.6.3. DeepSpeed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../mxnet.html">7.7. mxnet库</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mxnets/ndarray.html">7.7.1. nd模块</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../mxnets/ndarrays/ndarray.html">ndarray</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mxnets/ndarrays/ndarray.random.html">ndarray.random</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../mxnets/gluon.html">7.7.2. gluon模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mxnets/autograd.html">7.7.3. autograd模块</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tensorflow.html">7.8. tensorflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Keras.html">7.9. Keras</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Keras/normal.html">7.9.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Keras/demo.html">7.9.2. 实例</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Keras/demos/binary_classification.html">二分类问题</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Keras/demos/multiclass_classification.html">多分类问题</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Keras/demos/regression.html">回归问题</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../other.html">7.10. 其他</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../website.html">8. 关键网站</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../websites/Papers%20with%20Code.html">8.1. Papers with Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../websites/Kaggle.html">8.2. Kaggle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../websites/ArXiv.html">8.3. ArXiv 学术论文预印本平台</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../websites/video.html">8.4. 视频相关</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../websites/normal.html">8.5. 通用</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../practice.html">9. 实践</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../practices/OCR.html">9.1. OCR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../practices/OCRs/normal.html">9.1.1. 常用</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../practices/AIML.html">9.2. AIML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../practices/AIMLs/normal.html">9.2.1. 常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../practices/AIMLs/spec.html">9.2.2. AIML 2.1 Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../opensource.html">10. 开源项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/Agent.html">10.1. Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/RAG.html">10.2. RAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/normal.html">10.3. 常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/ui.html">10.4. UI界面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/finetune.html">10.5. 调优</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/search.html">10.6. 搜索</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/LLM-Inference-Engine.html">10.7. LLM Inference Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/LLM-Inference-Tool.html">10.8. 模型推理平台</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/LLM-inference-accelerate.html">10.9. LLM推理加速</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/Evaluate.html">10.10. LLM评估</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opensources/platform.html">10.11. AI平台</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../dataset.html">11. 数据集</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets/normal.html">11.1. 常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets/chinese.html">11.2. 中文数据集</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets/chinese_image.html">11.3. 中文图片相关数据集</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets/huggingface.html">11.4. dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets/website.html">11.5. 数据集相关网站</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../model.html">12. 常见模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda.html">13. 图形&amp;计算加速技术</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cudas/normal.html">13.1. 常用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cudas/cuda.html">13.2. cuda</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Evaluate.html">14. Evaluate评测</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Evaluates/normal.html">14.1. 通用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Evaluates/TruLens.html">14.2. TruLens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Evaluates/Ragas.html">14.3. Ragas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Evaluates/DeepEval.html">14.4. DeepEval</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Evaluates/UpTrain.html">14.5. UpTrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Evaluates/huggingface.html">14.6. evaluate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../%E4%BC%A0%E7%BB%9FAI.html">15. 传统AI</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">新溪-gordon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../framework.html"><span class="section-number">7. </span>学习框架</a> &raquo;</li>
        
          <li><a href="../../huggingface.html"><span class="section-number">7.3. </span>huggingface</a> &raquo;</li>
        
          <li><a href="../normal.html"><span class="section-number">7.3.1. </span>常用</a> &raquo;</li>
        
      <li>Hub Python Library</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/frameworks/huggingfaces/normals/lib_python.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            <nav id="local-table-of-contents" role="navigation" aria-labelledby="local-table-of-contents-title">
              <h4 id="local-table-of-contents-title">On This Page</h4>
              <ul>
<li><a class="reference internal" href="#">Hub Python Library</a><ul>
<li><a class="reference internal" href="#id2">安装</a></li>
<li><a class="reference internal" href="#id3">基本操作</a><ul>
<li><a class="reference internal" href="#login">Login</a></li>
<li><a class="reference internal" href="#create-a-repository">Create a repository</a></li>
<li><a class="reference internal" href="#upload-files">Upload files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">环境变量</a></li>
<li><a class="reference internal" href="#offline-mode">Offline mode 离线模式</a><ul>
<li><a class="reference internal" href="#id5">获取模型和分词器以离线使用</a></li>
</ul>
</li>
<li><a class="reference internal" href="#download-files-from-the-hub">Download files from the Hub</a></li>
<li><a class="reference internal" href="#upload-files-to-the-hub">Upload files to the Hub</a></li>
<li><a class="reference internal" href="#hffilesystem">HfFileSystem</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#integrations">Integrations</a></li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
</ul>
</li>
<li><a class="reference internal" href="#repository">Repository</a><ul>
<li><a class="reference internal" href="#repo-creation-and-deletion">Repo creation and deletion</a></li>
<li><a class="reference internal" href="#other-ops">Other OPs</a></li>
<li><a class="reference internal" href="#manage-a-local-copy-of-your-repository">Manage a local copy of your repository</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inference">Inference</a><ul>
<li><a class="reference internal" href="#inference-client">Inference Client</a><ul>
<li><a class="reference internal" href="#custom-requests">Custom requests</a></li>
</ul>
</li>
<li><a class="reference internal" href="#async-inference-client">Async Inference Client</a></li>
<li><a class="reference internal" href="#inferenceapi">InferenceAPI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cache">Cache</a><ul>
<li><a class="reference internal" href="#understand-caching">Understand caching</a></li>
<li><a class="reference internal" href="#caching-assets">Caching assets</a></li>
<li><a class="reference internal" href="#scan-your-cache">Scan your cache</a><ul>
<li><a class="reference internal" href="#scan-cache-from-the-terminal">Scan cache from the terminal</a></li>
<li><a class="reference internal" href="#scan-cache-from-python">Scan cache from Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean-your-cache">Clean your cache</a><ul>
<li><a class="reference internal" href="#clean-cache-from-the-terminal">Clean cache from the terminal</a></li>
<li><a class="reference internal" href="#clean-cache-from-python">Clean cache from Python</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#model-card">Model Card</a><ul>
<li><a class="reference internal" href="#load-a-model-card-from-the-hub">Load a Model Card from the Hub</a></li>
<li><a class="reference internal" href="#create-model-cards">Create Model Cards</a></li>
<li><a class="reference internal" href="#share-model-cards">Share Model Cards</a><ul>
<li><a class="reference internal" href="#include-evaluation-results">Include Evaluation Results</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#integrate-library">Integrate Library</a><ul>
<li><a class="reference internal" href="#a-flexible-approach-helpers">A flexible approach: helpers</a><ul>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-more-complex-approach-class-inheritance">A more complex approach: class inheritance</a><ul>
<li><a class="reference internal" href="#a-concrete-example-pytorch">A concrete example: PyTorch</a><ul>
<li><a class="reference internal" href="#how-to-use-it">How to use it</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#quick-comparison">Quick comparison</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
  <table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../../../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
<section id="hub-python-library">
<h1>Hub Python Library<a class="headerlink" href="#hub-python-library" title="此标题的永久链接">¶</a></h1>
<section id="id2">
<h2>安装<a class="headerlink" href="#id2" title="此标题的永久链接">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="s1">&#39;huggingface_hub[&quot;cli&quot;]&#39;</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">huggingface_hub</span><span class="p">[</span><span class="n">inference</span><span class="p">]</span>    <span class="o">//</span> <span class="k">async</span> <span class="n">http</span> <span class="p">(</span><span class="ow">or</span> <span class="n">use</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">aiohttp</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2>基本操作<a class="headerlink" href="#id3" title="此标题的永久链接">¶</a></h2>
<section id="login">
<h3>Login<a class="headerlink" href="#login" title="此标题的永久链接">¶</a></h3>
<p>cli:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>huggingface-cli login
# or using an environment variable
huggingface-cli login --token $HUGGINGFACE_TOKEN
</pre></div>
</div>
<p>python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">login</span>
<span class="n">login</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="create-a-repository">
<h3>Create a repository<a class="headerlink" href="#create-a-repository" title="此标题的永久链接">¶</a></h3>
<p>create a private repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfApi</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">()</span>
<span class="n">api</span><span class="o">.</span><span class="n">create_repo</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;super-cool-model&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>create a private repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfApi</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">()</span>
<span class="n">api</span><span class="o">.</span><span class="n">create_repo</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;super-cool-model&quot;</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="upload-files">
<h3>Upload files<a class="headerlink" href="#upload-files" title="此标题的永久链接">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfApi</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">()</span>
<span class="n">api</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span>
    <span class="n">path_or_fileobj</span><span class="o">=</span><span class="s2">&quot;/home/lysandre/dummy-test/README.md&quot;</span><span class="p">,</span>
    <span class="n">path_in_repo</span><span class="o">=</span><span class="s2">&quot;README.md&quot;</span><span class="p">,</span>
    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;lysandre/test-model&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="id4">
<h2>环境变量<a class="headerlink" href="#id4" title="此标题的永久链接">¶</a></h2>
<p>预训练模型本地缓存地址:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">default</span><span class="p">:</span> <span class="n">HUGGINGFACE_HUB_CACHE</span> <span class="ow">or</span> <span class="n">TRANSFORMERS_CACHE</span><span class="o">.</span>
<span class="mf">2.</span> <span class="n">HF_HOME</span>
<span class="mf">3.</span> <span class="n">XDG_CACHE_HOME</span> <span class="o">+</span> <span class="o">/</span><span class="n">huggingface</span>

<span class="n">默认</span><span class="p">:</span> <span class="o">~/.</span><span class="n">cache</span><span class="o">/</span><span class="n">huggingface</span><span class="o">/</span><span class="n">hub</span>
</pre></div>
</div>
<p>通用参数:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>HF_ENDPOINT: https://huggingface.co
HF_HOME: ~/.cache/huggingface
HUGGINGFACE_HUB_CACHE: ~/.cache/huggingface/hub
HUGGINGFACE_ASSETS_CACHE: ~/.cache/huggingface/assets
HUGGING_FACE_HUB_TOKEN: $HF_HOME/token
</pre></div>
</div>
<p>HF_HUB_OFFLINE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>如果设置，则在尝试获取文件时不会进行任何HTTP调用
</pre></div>
</div>
</section>
<section id="offline-mode">
<h2>Offline mode 离线模式<a class="headerlink" href="#offline-mode" title="此标题的永久链接">¶</a></h2>
<p>启用离线模式:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">设置环境变量</span> <span class="n">TRANSFORMERS_OFFLINE</span><span class="o">=</span><span class="mi">1</span>

<span class="n">设置环境变量</span> <span class="n">HF_DATASETS_OFFLINE</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span> <span class="n">Add</span> <span class="n">Datasets</span> <span class="n">to</span> <span class="n">your</span> <span class="n">offline</span> <span class="n">training</span> <span class="n">workflow</span>
</pre></div>
</div>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>python examples/pytorch/translation/run_translation.py --model_name_or_path t5-small \
   --dataset_name wmt16 --dataset_config ro-en ...


在脱机实例中运行此相同程序：
HF_DATASETS_OFFLINE=1 TRANSFORMERS_OFFLINE=1 \
python examples/pytorch/translation/run_translation.py --model_name_or_path t5-small \
        --dataset_name wmt16 --dataset_config ro-en ...
</pre></div>
</div>
<section id="id5">
<h3>获取模型和分词器以离线使用<a class="headerlink" href="#id5" title="此标题的永久链接">¶</a></h3>
<ol class="arabic">
<li><p>在 <a class="reference external" href="https://huggingface.co/models">Model Hub</a> 直接下载文件</p></li>
<li><p>Use the <cite>PreTrainedModel.from_pretrained()</cite> and <cite>PreTrainedModel.save_pretrained()</cite> workflow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>a. Download your files ahead of time with `PreTrainedModel.from_pretrained()`:

        from transformers import AutoTokenizer, AutoModelForSeq2SeqLM
        tokenizer = AutoTokenizer.from_pretrained(&quot;bigscience/T0_3B&quot;)
        model = AutoModelForSeq2SeqLM.from_pretrained(&quot;bigscience/T0_3B&quot;)

b. Save your files to a specified directory with `PreTrainedModel.save_pretrained()`:

        tokenizer.save_pretrained(&quot;./your/path/bigscience_t0&quot;)
        model.save_pretrained(&quot;./your/path/bigscience_t0&quot;)

c. Now when you’re offline, reload your files with `PreTrainedModel.from_pretrained()` from the specified directory:

        tokenizer = AutoTokenizer.from_pretrained(&quot;./your/path/bigscience_t0&quot;)
        model = AutoModel.from_pretrained(&quot;./your/path/bigscience_t0&quot;)
</pre></div>
</div>
</li>
<li><p>Programmatically download files with the huggingface_hub library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>a. Install the huggingface_hub library in your virtual environment:
        python -m pip install huggingface_hub

b. Use the `hf_hub_download()` function to download a file to a specific path.
        from huggingface_hub import hf_hub_download
        hf_hub_download(repo_id=&quot;bigscience/T0_3B&quot;, filename=&quot;config.json&quot;, cache_dir=&quot;./your/path/bigscience_t0&quot;)

c. Once your file is downloaded and locally cached, specify it’s local path to load and use it:
        from transformers import AutoConfig
        config = AutoConfig.from_pretrained(&quot;./your/path/bigscience_t0/config.json&quot;)
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="download-files-from-the-hub">
<h2>Download files from the Hub<a class="headerlink" href="#download-files-from-the-hub" title="此标题的永久链接">¶</a></h2>
<p>Download and cache a single file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">hf_hub_download</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hf_hub_download</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;lysandre/arxiv-nlp&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;config.json&quot;</span><span class="p">)</span>
<span class="go">&#39;/root/.cache/huggingface/hub/models--lysandre--arxiv-nlp/snapshots/894a...fade/config.json&#39;</span>

<span class="go"># Download from a dataset</span>
<span class="go">hf_hub_download(repo_id=&quot;google/fleurs&quot;, filename=&quot;fleurs.py&quot;, repo_type=&quot;dataset&quot;)</span>

<span class="go"># Download from the `v1.0` tag</span>
<span class="go">hf_hub_download(repo_id=&quot;lysandre/arxiv-nlp&quot;, filename=&quot;config.json&quot;, revision=&quot;v1.0&quot;)</span>
</pre></div>
</div>
<p>Download and cache an entire repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">snapshot_download</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">snapshot_download</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;lysandre/arxiv-nlp&quot;</span><span class="p">)</span>
<span class="go">&#39;/home/lysandre/.cache/huggingface/hub/models--lysandre--arxiv-nlp/snapshots/894a...fade&#39;</span>
</pre></div>
</div>
<p>Download files to a local folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">在使用hf_hub_download</span><span class="p">()</span> <span class="ow">and</span> <span class="n">snapshot_download</span><span class="p">()</span><span class="n">函数时可以借用如下参数把文件存储到指定目录</span><span class="p">:</span>
<span class="n">cache_dir</span><span class="p">:</span>
<span class="n">filename</span><span class="p">:</span>
<span class="n">local_dir</span><span class="p">:</span>
<span class="n">local_dir_use_symlinks</span><span class="o">=</span><span class="kc">True</span>


<span class="n">Example</span><span class="p">:</span>
        <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;data/train.csv&quot;</span>
        <span class="n">local_dir</span><span class="o">=</span><span class="s2">&quot;path/to/folder&quot;</span>
        <span class="o">=&gt;</span> <span class="n">the</span> <span class="n">returned</span> <span class="n">filepath</span> <span class="n">will</span> <span class="n">be</span> <span class="s2">&quot;path/to/folder/data/train.csv&quot;</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="upload-files-to-the-hub">
<h2>Upload files to the Hub<a class="headerlink" href="#upload-files-to-the-hub" title="此标题的永久链接">¶</a></h2>
<p>Upload a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfApi</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">()</span>
<span class="n">api</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span>
    <span class="n">path_or_fileobj</span><span class="o">=</span><span class="s2">&quot;/path/to/local/folder/README.md&quot;</span><span class="p">,</span>
    <span class="n">path_in_repo</span><span class="o">=</span><span class="s2">&quot;README.md&quot;</span><span class="p">,</span>
    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;username/test-dataset&quot;</span><span class="p">,</span>
    <span class="n">repo_type</span><span class="o">=</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Upload a folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfApi</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">()</span>

<span class="n">api</span><span class="o">.</span><span class="n">upload_folder</span><span class="p">(</span>
    <span class="n">folder_path</span><span class="o">=</span><span class="s2">&quot;/path/to/local/space&quot;</span><span class="p">,</span>
    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;username/my-cool-space&quot;</span><span class="p">,</span>
    <span class="n">repo_type</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Non-blocking upload(使用 run_as_future 参数):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfApi</span>
<span class="o">&gt;&gt;</span> <span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">()</span>
<span class="o">&gt;&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">upload_folder</span><span class="p">(</span> <span class="c1"># Upload in the background (non-blocking action)</span>
<span class="o">..</span>     <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;username/my-model&quot;</span><span class="p">,</span>
<span class="o">..</span>     <span class="n">folder_path</span><span class="o">=</span><span class="s2">&quot;checkpoints-001&quot;</span><span class="p">,</span>
<span class="o">..</span>     <span class="n">run_as_future</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="o">..</span> <span class="p">)</span>

<span class="o">&gt;&gt;</span> <span class="n">future</span>
<span class="n">Future</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="o">&gt;&gt;</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
<span class="kc">False</span>

<span class="o">&gt;&gt;</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="c1"># Wait for the upload to complete (blocking action)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Upload a folder by chunks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upload_folder</span><span class="p">(</span>
    <span class="n">folder_path</span><span class="o">=</span><span class="s2">&quot;local/checkpoints&quot;</span><span class="p">,</span>
    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;username/my-dataset&quot;</span><span class="p">,</span>
    <span class="n">repo_type</span><span class="o">=</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
    <span class="n">multi_commits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">multi_commits_verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="hffilesystem">
<h2>HfFileSystem<a class="headerlink" href="#hffilesystem" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>Interact with the Hub through the Filesystem API</p></li>
</ul>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="此标题的永久链接">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfFileSystem</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">HfFileSystem</span><span class="p">()</span>

<span class="c1"># List all files in a directory</span>
<span class="n">fs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;datasets/my-username/my-dataset-repo/data&quot;</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># List all &quot;.csv&quot; files in a repo</span>
<span class="n">fs</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;datasets/my-username/my-dataset-repo/**.csv&quot;</span><span class="p">)</span>

<span class="c1"># Read a remote file</span>
<span class="k">with</span> <span class="n">fs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;datasets/my-username/my-dataset-repo/data/train.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">train_data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

<span class="c1"># Read the content of a remote file as a string</span>
<span class="n">train_data</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="s2">&quot;datasets/my-username/my-dataset-repo/data/train.csv&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="s2">&quot;dev&quot;</span><span class="p">)</span>

<span class="c1"># Write a remote file</span>
<span class="k">with</span> <span class="n">fs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;datasets/my-username/my-dataset-repo/data/validation.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;text,label&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Fantastic movie!,good&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="integrations">
<h3>Integrations<a class="headerlink" href="#integrations" title="此标题的永久链接">¶</a></h3>
<p>文件格式:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hf</span><span class="p">:</span><span class="o">//</span><span class="p">[</span><span class="o">&lt;</span><span class="n">repo_type_prefix</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&lt;</span><span class="n">repo_id</span><span class="o">&gt;</span><span class="p">[</span><span class="o">@&lt;</span><span class="n">revision</span><span class="o">&gt;</span><span class="p">]</span><span class="o">/&lt;</span><span class="n">path</span><span class="o">/</span><span class="ow">in</span><span class="o">/</span><span class="n">repo</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Reading/writing a Pandas DataFrame from/to a Hub repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Read a remote CSV file into a dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;hf://datasets/my-username/my-dataset-repo/train.csv&quot;</span><span class="p">)</span>

<span class="c1"># Write a dataframe to a remote CSV file</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;hf://datasets/my-username/my-dataset-repo/test.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Querying (remote) Hub files with DuckDB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfFileSystem</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">duckdb</span>

<span class="n">fs</span> <span class="o">=</span> <span class="n">HfFileSystem</span><span class="p">()</span>
<span class="n">duckdb</span><span class="o">.</span><span class="n">register_filesystem</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
<span class="c1"># Query a remote file and get the result back as a dataframe</span>
<span class="n">fs_query_file</span> <span class="o">=</span> <span class="s2">&quot;hf://datasets/my-username/my-dataset-repo/data_dir/data.parquet&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SELECT * FROM &#39;</span><span class="si">{</span><span class="n">fs_query_file</span><span class="si">}</span><span class="s2">&#39; LIMIT 10&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="authentication">
<h3>Authentication<a class="headerlink" href="#authentication" title="此标题的永久链接">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">HfFileSystem</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">HfFileSystem</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="repository">
<h2>Repository<a class="headerlink" href="#repository" title="此标题的永久链接">¶</a></h2>
<section id="repo-creation-and-deletion">
<h3>Repo creation and deletion<a class="headerlink" href="#repo-creation-and-deletion" title="此标题的永久链接">¶</a></h3>
<p>create_repo():</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_repo</span>
<span class="o">&gt;&gt;</span> <span class="n">create_repo</span><span class="p">(</span><span class="s2">&quot;lysandre/test-model&quot;</span><span class="p">)</span>
<span class="s1">&#39;https://huggingface.co/lysandre/test-model&#39;</span>


<span class="o">&gt;&gt;</span> <span class="n">create_repo</span><span class="p">(</span><span class="s2">&quot;lysandre/test-dataset&quot;</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;</span> <span class="n">create_repo</span><span class="p">(</span><span class="s2">&quot;lysandre/test-private&quot;</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>delete_repo():</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">delete_repo</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;lysandre/my-corrupted-dataset&quot;</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Clone a repository (only for Spaces):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">duplicate_space</span>
<span class="o">&gt;&gt;</span> <span class="n">duplicate_space</span><span class="p">(</span><span class="s2">&quot;multimodalart/dreambooth-training&quot;</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">RepoUrl</span><span class="p">(</span><span class="s1">&#39;https://huggingface.co/spaces/nateraw/dreambooth-training&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="other-ops">
<h3>Other OPs<a class="headerlink" href="#other-ops" title="此标题的永久链接">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_branch</span><span class="p">,</span> <span class="n">create_tag</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">list_repo_refs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">update_repo_visibility</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">move_repo</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">whoami</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">InferenceClient</span>
</pre></div>
</div>
</section>
<section id="manage-a-local-copy-of-your-repository">
<h3>Manage a local copy of your repository<a class="headerlink" href="#manage-a-local-copy-of-your-repository" title="此标题的永久链接">¶</a></h3>
<p>Use a local repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">Repository</span>
<span class="n">repo</span> <span class="o">=</span> <span class="n">Repository</span><span class="p">(</span><span class="n">local_dir</span><span class="o">=</span><span class="s2">&quot;&lt;path&gt;/&lt;to&gt;/&lt;folder&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Clone:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">Repository</span>
<span class="n">repo</span> <span class="o">=</span> <span class="n">Repository</span><span class="p">(</span><span class="n">local_dir</span><span class="o">=</span><span class="s2">&quot;w2v2&quot;</span><span class="p">,</span> <span class="n">clone_from</span><span class="o">=</span><span class="s2">&quot;facebook/wav2vec2-large-960h-lv60&quot;</span><span class="p">)</span>


<span class="n">repo</span> <span class="o">=</span> <span class="n">Repository</span><span class="p">(</span><span class="n">local_dir</span><span class="o">=</span><span class="s2">&quot;huggingface-hub&quot;</span><span class="p">,</span> <span class="n">clone_from</span><span class="o">=</span><span class="s2">&quot;https://huggingface.co/facebook/wav2vec2-large-960h-lv60&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="inference">
<h2>Inference<a class="headerlink" href="#inference" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>Run Inference on servers</p></li>
<li><p>InferenceClient(python): <a class="reference external" href="https://huggingface.co/docs/huggingface_hub/v0.16.3/en/package_reference/inference_client">https://huggingface.co/docs/huggingface_hub/v0.16.3/en/package_reference/inference_client</a></p></li>
<li><p>Inference Endpoints: <a class="reference external" href="https://huggingface.co/docs/inference-endpoints/index">https://huggingface.co/docs/inference-endpoints/index</a></p></li>
<li><p>Inference API: <a class="reference external" href="https://huggingface.co/docs/api-inference/index">https://huggingface.co/docs/api-inference/index</a></p></li>
<li><p>JS client: <a class="reference external" href="https://huggingface.co/docs/huggingface.js/inference/README">https://huggingface.co/docs/huggingface.js/inference/README</a></p></li>
</ul>
<p>There are several services you can connect to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Inference API:
        a service that allows you to run accelerated inference
                on Hugging Face’s infrastructure for free.
        This service is a fast way to get started, test different models,
                and prototype AI products.
Inference Endpoints:
        a product to easily deploy models to production.
        Inference is run by Hugging Face in a dedicated,
                fully managed infrastructure on a cloud provider of your choice.
</pre></div>
</div>
<p>表格:currently supported tasks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+------------+----------------------------------+----+----------------------------------+
| Domain     | Task                             | Sup| Method                           |
+============+==================================+====+==================================+
| Audio      | Audio Classification             | ✅ | audio_classification()           |
+------------+----------------------------------+----+----------------------------------+
|            | Automatic Speech Recognition     | ✅ | automatic_speech_recognition()   |
+------------+----------------------------------+----+----------------------------------+
|            | Text-to-Speech                   | ✅ | text_to_speech()                 |
+------------+----------------------------------+----+----------------------------------+
| CV         | Image Classification             | ✅ | image_classification()           |
+------------+----------------------------------+----+----------------------------------+
|            | Image Segmentation               | ✅ | image_segmentation()             |
+------------+----------------------------------+----+----------------------------------+
|            | Image-to-Image                   | ✅ | image_to_image()                 |
+------------+----------------------------------+----+----------------------------------+
|            | Image-to-Text                    | ✅ | image_to_text()                  |
+------------+----------------------------------+----+----------------------------------+
|            | Object Detection                 |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Text-to-Image                    | ✅ | text_to_image()                  |
+------------+----------------------------------+----+----------------------------------+
|            | Zero-Shot-Image-Classification   | ✅ | zero_shot_image_classification() |
+------------+----------------------------------+----+----------------------------------+
| Multimodal | Documentation Question Answering |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Visual Question Answering        |    |                                  |
+------------+----------------------------------+----+----------------------------------+
| NLP        | Conversational                   | ✅ | conversational()                 |
+------------+----------------------------------+----+----------------------------------+
|            | Feature Extraction               | ✅ | feature_extraction()             |
+------------+----------------------------------+----+----------------------------------+
|            | Fill Mask                        |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Question Answering               |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Sentence Similarity              | ✅ | sentence_similarity()            |
+------------+----------------------------------+----+----------------------------------+
|            | Summarization                    | ✅ | summarization()                  |
+------------+----------------------------------+----+----------------------------------+
|            | Table Question Answering         |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Text Classification              |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Text Generation                  | ✅ | text_generation()                |
+------------+----------------------------------+----+----------------------------------+
|            | Token Classification             |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Translation                      |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Zero Shot Classification         |    |                                  |
+------------+----------------------------------+----+----------------------------------+
| Tabular    | Tabular Classification           |    |                                  |
+------------+----------------------------------+----+----------------------------------+
|            | Tabular Regression               |    |                                  |
+------------+----------------------------------+----+----------------------------------+
</pre></div>
</div>
<section id="inference-client">
<h3>Inference Client<a class="headerlink" href="#inference-client" title="此标题的永久链接">¶</a></h3>
<p>生成client命令:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">InferenceClient</span>

<span class="c1"># default token</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">InferenceClient</span><span class="p">(</span>

<span class="c1"># Authentication</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">InferenceClient</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="s1">&#39;hf_.....&#39;</span><span class="p">)</span>

<span class="c1"># Using a specific model</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">InferenceClient</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;prompthero/openjourney-v4&quot;</span><span class="p">)</span>

<span class="c1"># Using a specific URL</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">InferenceClient</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;https://uu149rez6gw9ehej.eu-west-1.aws.endpoints.huggingface.cloud/deepfloyd-if&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>使用示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">InferenceClient</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">InferenceClient</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">image_to_image</span><span class="p">(</span><span class="s2">&quot;cat.jpg&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;turn the cat into a tiger&quot;</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;tiger.jpg&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>上面只是其中一个示例，<a class="reference external" href="https://huggingface.co/docs/huggingface_hub/v0.16.3/en/package_reference/inference_client">这儿</a> 有各种使用示例</p>
</div>
<section id="custom-requests">
<h4>Custom requests<a class="headerlink" href="#custom-requests" title="此标题的永久链接">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">InferenceClient</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">InferenceClient</span><span class="p">()</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="s2">&quot;An astronaut riding a horse on the moon.&quot;</span><span class="p">},</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;stabilityai/stable-diffusion-2-1&quot;</span>
<span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">content</span> <span class="c1"># raw bytes</span>
</pre></div>
</div>
</section>
</section>
<section id="async-inference-client">
<h3>Async Inference Client<a class="headerlink" href="#async-inference-client" title="此标题的永久链接">¶</a></h3>
<p>安装:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">huggingface_hub</span><span class="p">[</span><span class="n">inference</span><span class="p">]</span>
<span class="c1"># or</span>
<span class="c1"># pip install aiohttp</span>
</pre></div>
</div>
<p>生成async client命令:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncInferenceClient</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">AsyncInferenceClient</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="s1">&#39;hf_.....&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="inferenceapi">
<h3>InferenceAPI<a class="headerlink" href="#inferenceapi" title="此标题的永久链接">¶</a></h3>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub.inference_api</span><span class="w"> </span><span class="kn">import</span> <span class="n">InferenceApi</span>

<span class="c1"># Mask-fill example</span>
<span class="n">inference</span> <span class="o">=</span> <span class="n">InferenceApi</span><span class="p">(</span><span class="s2">&quot;bert-base-uncased&quot;</span><span class="p">)</span>
<span class="n">inference</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="s2">&quot;The goal of life is [MASK].&quot;</span><span class="p">)</span>

<span class="c1"># Question Answering example</span>
<span class="n">inference</span> <span class="o">=</span> <span class="n">InferenceApi</span><span class="p">(</span><span class="s2">&quot;deepset/roberta-base-squad2&quot;</span><span class="p">)</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What&#39;s my name?&quot;</span><span class="p">,</span>
    <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="s2">&quot;My name is Clara and I live in Berkeley.&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">inference</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="c1"># Zero-shot example</span>
<span class="n">inference</span> <span class="o">=</span> <span class="n">InferenceApi</span><span class="p">(</span><span class="s2">&quot;typeform/distilbert-base-uncased-mnli&quot;</span><span class="p">)</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="s2">&quot;Hi, I recently bought a device from your company but it is not working as advertised and I would like to get reimbursed!&quot;</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;candidate_labels&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;refund&quot;</span><span class="p">,</span> <span class="s2">&quot;legal&quot;</span><span class="p">,</span> <span class="s2">&quot;faq&quot;</span><span class="p">]}</span>
<span class="n">inference</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

<span class="c1"># Overriding configured task</span>
<span class="n">inference</span> <span class="o">=</span> <span class="n">InferenceApi</span><span class="p">(</span><span class="s2">&quot;bert-base-uncased&quot;</span><span class="p">,</span> <span class="n">task</span><span class="o">=</span><span class="s2">&quot;feature-extraction&quot;</span><span class="p">)</span>

<span class="c1"># Text-to-image</span>

<span class="c1"># Using a specific model</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">InferenceClient</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;prompthero/openjourney-v4&quot;</span><span class="p">)</span>



<span class="c1"># Return as raw response to parse the output yourself</span>
<span class="n">inference</span> <span class="o">=</span> <span class="n">InferenceApi</span><span class="p">(</span><span class="s2">&quot;mio/amadeus&quot;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">inference</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">,</span> <span class="n">raw_response</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">headers</span>
<span class="n">response</span><span class="o">.</span><span class="n">content</span> <span class="c1"># raw bytes from server</span>
</pre></div>
</div>
</section>
</section>
<section id="cache">
<h2>Cache<a class="headerlink" href="#cache" title="此标题的永久链接">¶</a></h2>
<section id="understand-caching">
<h3>Understand caching<a class="headerlink" href="#understand-caching" title="此标题的永久链接">¶</a></h3>
<ul class="simple">
<li><p>The Hugging Face Hub cache-system is designed to be the central cache shared across libraries that depend on the Hub.</p></li>
</ul>
<p>The caching system is designed as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;CACHE_DIR&gt;
├─ &lt;MODELS&gt;
├─ &lt;DATASETS&gt;
├─ &lt;SPACES&gt;

示例:
&lt;CACHE_DIR&gt;
├─ models--julien-c--EsperBERTo-small
├─ models--lysandrejik--arxiv-nlp
├─ models--bert-base-cased
├─ datasets--glue
├─ datasets--huggingface--DataMeasurementsFiles
├─ spaces--dalle-mini--dalle-mini
</pre></div>
</div>
<ul class="simple">
<li><p>&lt;CACHE_DIR&gt; is customizable with the <code class="docutils literal notranslate"><span class="pre">cache_dir</span></code> argument on all methods, or by specifying either <code class="docutils literal notranslate"><span class="pre">HF_HOME</span></code> or <code class="docutils literal notranslate"><span class="pre">HUGGINGFACE_HUB_CACHE</span></code> environment variable.</p></li>
</ul>
</section>
<section id="caching-assets">
<h3>Caching assets<a class="headerlink" href="#caching-assets" title="此标题的永久链接">¶</a></h3>
<ul>
<li><p>除了从 Hub 缓存文件外，下游库通常需要缓存与 HF 相关但未直接被 <code class="docutils literal notranslate"><span class="pre">huggingface_hub</span></code> 处理的其他文件 （例如：从 GitHub 下载的文件、预处理的数据、日志,…）</p></li>
<li><p>为了缓存这些文件，调用 assets 使用 huggingface_hub 工具的 cached_assets_path() 方法来管理缓存:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">cached_assets_path</span>

<span class="n">assets_path</span> <span class="o">=</span> <span class="n">cached_assets_path</span><span class="p">(</span>
        <span class="n">library_name</span><span class="o">=</span><span class="s2">&quot;datasets&quot;</span><span class="p">,</span>
        <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;SQuAD&quot;</span><span class="p">,</span>
        <span class="n">subfolder</span><span class="o">=</span><span class="s2">&quot;download&quot;</span>
<span class="p">)</span>
<span class="c1"># Do anything you like in your assets folder !</span>
<span class="n">something_path</span> <span class="o">=</span> <span class="n">assets_path</span> <span class="o">/</span> <span class="s2">&quot;something.json&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="scan-your-cache">
<h3>Scan your cache<a class="headerlink" href="#scan-your-cache" title="此标题的永久链接">¶</a></h3>
<section id="scan-cache-from-the-terminal">
<h4>Scan cache from the terminal<a class="headerlink" href="#scan-cache-from-the-terminal" title="此标题的永久链接">¶</a></h4>
<p>➜ 示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ huggingface-cli scan-cache
REPO ID             REPO TYPE SIZE ON DISK LAST_MODIFIED REFS                LOCAL PATH
----------------    --------- ------------ ------------- ------------------- -------------
glue                dataset         116.3K 4 days ago    2.4.0, main, 1.17.0 ~/.cache/huggingface/hub/datasets--glue
google/fleurs       dataset          64.9M 1 week ago    refs/pr/1, main     ~/.cache/huggingface/hub/datasets--google--fleurs
Jean-Baptiste/ner   model           441.0M 16 hours ago  main                ~/.cache/huggingface/hub/models--Jean-Baptiste--ner
bert-base-cased     model             1.9G 2 years ago                       ~/.cache/huggingface/hub/models--bert-base-cased
t5-base             model            10.1K 3 months ago  main                ~/.cache/huggingface/hub/models--t5-base
t5-small            model           970.7M 3 days ago    refs/pr/1, main     ~/.cache/huggingface/hub/models--t5-small

Done in 0.0s. Scanned 6 repo(s) for a total of 3.4G.
Got 1 warning(s) while scanning. Use -vvv to print details.
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>➜ huggingface-cli scan-cache -v
➜ eval &quot;huggingface-cli scan-cache -v&quot; | grep &quot;t5-small&quot;
</pre></div>
</div>
</section>
<section id="scan-cache-from-python">
<h4>Scan cache from Python<a class="headerlink" href="#scan-cache-from-python" title="此标题的永久链接">¶</a></h4>
<ul>
<li><p>具体参见: <a class="reference external" href="https://huggingface.co/docs/huggingface_hub/v0.16.3/en/package_reference/cache#huggingface_hub.scan_cache_dir">https://huggingface.co/docs/huggingface_hub/v0.16.3/en/package_reference/cache#huggingface_hub.scan_cache_dir</a></p></li>
<li><p>与命令 <code class="docutils literal notranslate"><span class="pre">huggingface-cli</span> <span class="pre">scan-cache</span></code> 对应的python源码:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">scan_cache_dir</span>

<span class="n">hf_cache_info</span> <span class="o">=</span> <span class="n">scan_cache_dir</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="clean-your-cache">
<h3>Clean your cache<a class="headerlink" href="#clean-your-cache" title="此标题的永久链接">¶</a></h3>
<section id="clean-cache-from-the-terminal">
<h4>Clean cache from the terminal<a class="headerlink" href="#clean-cache-from-the-terminal" title="此标题的永久链接">¶</a></h4>
<p>Using the TUI (Terminal User Interface):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">安装</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">huggingface_hub</span><span class="p">[</span><span class="s2">&quot;cli&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">使用</span>
<span class="n">huggingface</span><span class="o">-</span><span class="n">cli</span> <span class="n">delete</span><span class="o">-</span><span class="n">cache</span>

<span class="n">huggingface</span><span class="o">-</span><span class="n">cli</span> <span class="n">delete</span><span class="o">-</span><span class="n">cache</span> <span class="o">--</span><span class="nb">dir</span> <span class="o">~/.</span><span class="n">cache</span><span class="o">/</span><span class="n">huggingface</span><span class="o">/</span><span class="n">hub</span>
</pre></div>
</div>
</section>
<section id="clean-cache-from-python">
<h4>Clean cache from Python<a class="headerlink" href="#clean-cache-from-python" title="此标题的永久链接">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">scan_cache_dir</span>

<span class="n">delete_strategy</span> <span class="o">=</span> <span class="n">scan_cache_dir</span><span class="p">()</span><span class="o">.</span><span class="n">delete_revisions</span><span class="p">(</span>
    <span class="s2">&quot;81fd1d6e7847c99f5862c9fb81387956d99ec7aa&quot;</span>
    <span class="s2">&quot;e2983b237dccf3ab4937c97fa717319a9ca1a96d&quot;</span><span class="p">,</span>
    <span class="s2">&quot;6c0e6080953db56375760c0471a8c5f2929baf11&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Will free &quot;</span> <span class="o">+</span> <span class="n">delete_strategy</span><span class="o">.</span><span class="n">expected_freed_size_str</span><span class="p">)</span>

<span class="n">delete_strategy</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="model-card">
<h2>Model Card<a class="headerlink" href="#model-card" title="此标题的永久链接">¶</a></h2>
<section id="load-a-model-card-from-the-hub">
<h3>Load a Model Card from the Hub<a class="headerlink" href="#load-a-model-card-from-the-hub" title="此标题的永久链接">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>from huggingface_hub import ModelCard
card = ModelCard.load(&#39;nateraw/vit-base-beans&#39;)

=&gt;
card.data: Returns a ModelCardData instance with the model card’s metadata.
        Call .to_dict() on this instance to get the representation as a dictionary.
card.text: Returns the text of the card, excluding the metadata header.
card.content: Returns the text content of the card, including the metadata header.

=&gt;
card.data.to_dict()[&#39;language&#39;]
card.data.to_dict()[&#39;license&#39;]
...
</pre></div>
</div>
</section>
<section id="create-model-cards">
<h3>Create Model Cards<a class="headerlink" href="#create-model-cards" title="此标题的永久链接">¶</a></h3>
<p>很多种，最简单的方式:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">---</span>
<span class="s2">language: en</span>
<span class="s2">license: mit</span>
<span class="s2">---</span>

<span class="s2"># My Model Card</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">card</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="share-model-cards">
<h3>Share Model Cards<a class="headerlink" href="#share-model-cards" title="此标题的永久链接">¶</a></h3>
<p>create a new repo called ‘hf-hub-modelcards-pr-test’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">whoami</span><span class="p">,</span> <span class="n">create_repo</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">whoami</span><span class="p">()[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="n">repo_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">/hf-hub-modelcards-pr-test&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">create_repo</span><span class="p">(</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>create a card from the default template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">card_data</span> <span class="o">=</span> <span class="n">ModelCardData</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="n">license</span><span class="o">=</span><span class="s1">&#39;mit&#39;</span><span class="p">,</span> <span class="n">library_name</span><span class="o">=</span><span class="s1">&#39;keras&#39;</span><span class="p">)</span>
<span class="n">card</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="o">.</span><span class="n">from_template</span><span class="p">(</span>
    <span class="n">card_data</span><span class="p">,</span>
    <span class="n">model_id</span><span class="o">=</span><span class="s1">&#39;my-cool-model&#39;</span><span class="p">,</span>
    <span class="n">model_description</span><span class="o">=</span><span class="s2">&quot;this model does this and that&quot;</span><span class="p">,</span>
    <span class="n">developers</span><span class="o">=</span><span class="s2">&quot;Nate Raw&quot;</span><span class="p">,</span>
    <span class="n">repo</span><span class="o">=</span><span class="s2">&quot;https://github.com/huggingface/huggingface_hub&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>push that up to the hub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">card</span><span class="o">.</span><span class="n">push_to_hub</span><span class="p">(</span><span class="n">repo_id</span><span class="p">)</span>
<span class="ow">or</span> <span class="n">push</span> <span class="n">a</span> <span class="n">card</span> <span class="k">as</span> <span class="n">a</span> <span class="n">pull</span> <span class="n">request</span>
<span class="o">&gt;&gt;</span> <span class="n">card</span><span class="o">.</span><span class="n">push_to_hub</span><span class="p">(</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">create_pr</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<section id="include-evaluation-results">
<h4>Include Evaluation Results<a class="headerlink" href="#include-evaluation-results" title="此标题的永久链接">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">card_data</span> <span class="o">=</span> <span class="n">ModelCardData</span><span class="p">(</span>
    <span class="n">language</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="s1">&#39;mit&#39;</span><span class="p">,</span>
    <span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;my-cool-model&#39;</span><span class="p">,</span>
    <span class="n">eval_results</span> <span class="o">=</span> <span class="n">EvalResult</span><span class="p">(</span>
        <span class="n">task_type</span><span class="o">=</span><span class="s1">&#39;image-classification&#39;</span><span class="p">,</span>
        <span class="n">dataset_type</span><span class="o">=</span><span class="s1">&#39;beans&#39;</span><span class="p">,</span>
        <span class="n">dataset_name</span><span class="o">=</span><span class="s1">&#39;Beans&#39;</span><span class="p">,</span>
        <span class="n">metric_type</span><span class="o">=</span><span class="s1">&#39;accuracy&#39;</span><span class="p">,</span>
        <span class="n">metric_value</span><span class="o">=</span><span class="mf">0.7</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">card</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="o">.</span><span class="n">from_template</span><span class="p">(</span><span class="n">card_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">card.data</span></code> should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">language</span><span class="p">:</span> <span class="n">en</span>
<span class="n">license</span><span class="p">:</span> <span class="n">mit</span>
<span class="n">model</span><span class="o">-</span><span class="n">index</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">my</span><span class="o">-</span><span class="n">cool</span><span class="o">-</span><span class="n">model</span>
  <span class="n">results</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">task</span><span class="p">:</span>
      <span class="nb">type</span><span class="p">:</span> <span class="n">image</span><span class="o">-</span><span class="n">classification</span>
    <span class="n">dataset</span><span class="p">:</span>
      <span class="n">name</span><span class="p">:</span> <span class="n">Beans</span>
      <span class="nb">type</span><span class="p">:</span> <span class="n">beans</span>
    <span class="n">metrics</span><span class="p">:</span>
    <span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">accuracy</span>
      <span class="n">value</span><span class="p">:</span> <span class="mf">0.7</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="integrate-library">
<h2>Integrate Library<a class="headerlink" href="#integrate-library" title="此标题的永久链接">¶</a></h2>
<p>There are four main ways to integrate a library with the Hub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. Push to Hub:
        implement a method to upload a model to the Hub.
        This includes the model weights, model card and necessary data(for example, training logs).
        This method is often called `push_to_hub`().
2. Download from Hub:
        implement a method to load a model from the Hub.
        The method should download the model configuration/weights and load the model.
        This method is often called `from_pretrained` or `load_from_hub`().
3. Inference API:
        use our servers to run inference on models supported by your library for free.
4. Widgets:
        display a widget on the landing page of your models on the Hub.
        It allows users to quickly try a model from the browser.
</pre></div>
</div>
<section id="a-flexible-approach-helpers">
<h3>A flexible approach: helpers<a class="headerlink" href="#a-flexible-approach-helpers" title="此标题的永久链接">¶</a></h3>
<ul class="simple">
<li><p>The first approach to integrate a library to the Hub is to actually implement the <code class="docutils literal notranslate"><span class="pre">push_to_hub</span></code> and <code class="docutils literal notranslate"><span class="pre">from_pretrained</span></code> methods by yourself.</p></li>
</ul>
<p>from_pretrained:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">from_pretrained</span><span class="p">(</span><span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MyModelClass</span><span class="p">:</span>
   <span class="c1"># Download model from Hub</span>
   <span class="n">cached_model</span> <span class="o">=</span> <span class="n">hf_hub_download</span><span class="p">(</span>
      <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
      <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;model.pkl&quot;</span><span class="p">,</span>
      <span class="n">library_name</span><span class="o">=</span><span class="s2">&quot;fastai&quot;</span><span class="p">,</span>
      <span class="n">library_version</span><span class="o">=</span><span class="n">get_fastai_version</span><span class="p">(),</span>
   <span class="p">)</span>

   <span class="c1"># Load model</span>
    <span class="k">return</span> <span class="n">load_model</span><span class="p">(</span><span class="n">cached_model</span><span class="p">)</span>
</pre></div>
</div>
<p>push_to_hub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">push_to_hub</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">MyModelClass</span><span class="p">,</span> <span class="n">repo_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
   <span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">()</span>

   <span class="c1"># Create repo if not existing yet and get the associated repo_id</span>
   <span class="n">repo_id</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">create_repo</span><span class="p">(</span><span class="n">repo_name</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

   <span class="c1"># Save all files in a temporary directory and push them in a single commit</span>
   <span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">tmpdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>

      <span class="c1"># Save weights</span>
      <span class="n">save_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">tmpdir</span> <span class="o">/</span> <span class="s2">&quot;model.safetensors&quot;</span><span class="p">)</span>

      <span class="c1"># Generate model card</span>
      <span class="n">card</span> <span class="o">=</span> <span class="n">generate_model_card</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
      <span class="p">(</span><span class="n">tmpdir</span> <span class="o">/</span> <span class="s2">&quot;README.md&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>

      <span class="c1"># Save logs</span>
      <span class="c1"># Save figures</span>
      <span class="c1"># Save evaluation metrics</span>
      <span class="c1"># ...</span>

      <span class="c1"># Push to hub</span>
      <span class="k">return</span> <span class="n">api</span><span class="o">.</span><span class="n">upload_folder</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">folder_path</span><span class="o">=</span><span class="n">tmpdir</span><span class="p">)</span>
</pre></div>
</div>
<section id="limitations">
<h4>Limitations<a class="headerlink" href="#limitations" title="此标题的永久链接">¶</a></h4>
<p>when loading files from the Hub, it is common to offer parameters like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">token</span><span class="p">:</span> <span class="n">to</span> <span class="n">download</span> <span class="kn">from</span><span class="w"> </span><span class="nn">a</span> <span class="n">private</span> <span class="n">repo</span>
<span class="n">revision</span><span class="p">:</span> <span class="n">to</span> <span class="n">download</span> <span class="kn">from</span><span class="w"> </span><span class="nn">a</span> <span class="n">specific</span> <span class="n">branch</span>
<span class="n">cache_dir</span><span class="p">:</span> <span class="n">to</span> <span class="n">cache</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">specific</span> <span class="n">directory</span>
<span class="o">...</span>
</pre></div>
</div>
<p>when pushing models, similar parameters are supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">commit_message</span><span class="p">:</span> <span class="n">custom</span> <span class="n">commit</span> <span class="n">message</span>
<span class="n">private</span><span class="p">:</span> <span class="n">create</span> <span class="n">a</span> <span class="n">private</span> <span class="n">repo</span> <span class="k">if</span> <span class="n">missing</span>
<span class="n">create_pr</span><span class="p">:</span> <span class="n">create</span> <span class="n">a</span> <span class="n">PR</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">pushing</span> <span class="n">to</span> <span class="n">main</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>All of these parameters can be added to the implementations we saw above and passed to the huggingface_hub methods. However, if a parameter changes or a new feature is added, you will need to update your package. Supporting those parameters also means more documentation to maintain on your side.</p>
</div>
</section>
</section>
<section id="a-more-complex-approach-class-inheritance">
<h3>A more complex approach: class inheritance<a class="headerlink" href="#a-more-complex-approach-class-inheritance" title="此标题的永久链接">¶</a></h3>
<ul class="simple">
<li><p>A Mixin is a class that is meant to extend an existing class with a set of specific features using multiple inheritance.</p></li>
<li><p>Example: huggingface_hub provides its own mixin, the ModelHubMixin.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ModelHubMixin</span></code> class implements 3 public methods (<code class="docutils literal notranslate"><span class="pre">push_to_hub</span></code>, <code class="docutils literal notranslate"><span class="pre">save_pretrained</span></code> and <code class="docutils literal notranslate"><span class="pre">from_pretrained</span></code>).</p></li>
</ul>
<p>步骤:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Make</span> <span class="n">your</span> <span class="n">Model</span> <span class="k">class</span><span class="w"> </span><span class="nc">inherit</span> <span class="kn">from</span><span class="w"> </span><span class="nn">ModelHubMixin.</span>
<span class="mf">2.</span> <span class="n">Implement</span> <span class="n">the</span> <span class="n">private</span> <span class="n">methods</span><span class="p">:</span>
        <span class="n">_save_pretrained</span><span class="p">()</span>
        <span class="n">_from_pretrained</span><span class="p">()</span>
</pre></div>
</div>
<section id="a-concrete-example-pytorch">
<h4>A concrete example: PyTorch<a class="headerlink" href="#a-concrete-example-pytorch" title="此标题的永久链接">¶</a></h4>
<section id="how-to-use-it">
<h5>How to use it<a class="headerlink" href="#how-to-use-it" title="此标题的永久链接">¶</a></h5>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">torch.nn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nn</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">PyTorchModelHubMixin</span>

<span class="c1"># 1. Define your Pytorch model exactly the same way you are used to</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">,</span> <span class="n">PyTorchModelHubMixin</span><span class="p">):</span> <span class="c1"># multiple inheritance</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linear</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">linear</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">()</span>

<span class="c1"># 2. (optional) Save model to local directory</span>
<span class="n">model</span><span class="o">.</span><span class="n">save_pretrained</span><span class="p">(</span><span class="s2">&quot;path/to/my-awesome-model&quot;</span><span class="p">)</span>

<span class="c1"># 3. Push model weights to the Hub</span>
<span class="n">model</span><span class="o">.</span><span class="n">push_to_hub</span><span class="p">(</span><span class="s2">&quot;my-awesome-model&quot;</span><span class="p">)</span>

<span class="c1"># 4. Initialize model from the Hub</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">&quot;username/my-awesome-model&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="implementation">
<h5>Implementation<a class="headerlink" href="#implementation" title="此标题的永久链接">¶</a></h5>
<ol class="arabic">
<li><p>First, inherit your class from ModelHubMixin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModelHubMixin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PyTorchModelHubMixin</span><span class="p">(</span><span class="n">ModelHubMixin</span><span class="p">):</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Implement the <code class="docutils literal notranslate"><span class="pre">_save_pretrained</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">huggingface_hub</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModelCard</span><span class="p">,</span> <span class="n">ModelCardData</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PyTorchModelHubMixin</span><span class="p">(</span><span class="n">ModelHubMixin</span><span class="p">):</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>

   <span class="k">def</span><span class="w"> </span><span class="nf">_save_pretrained</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_directory</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot;Generate Model Card and save weights from a Pytorch model to a local directory.&quot;&quot;&quot;</span>
      <span class="n">model_card</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="o">.</span><span class="n">from_template</span><span class="p">(</span>
         <span class="n">card_data</span><span class="o">=</span><span class="n">ModelCardData</span><span class="p">(</span>
            <span class="n">license</span><span class="o">=</span><span class="s1">&#39;mit&#39;</span><span class="p">,</span>
            <span class="n">library_name</span><span class="o">=</span><span class="s2">&quot;pytorch&quot;</span><span class="p">,</span>
            <span class="o">...</span>
         <span class="p">),</span>
         <span class="n">model_summary</span><span class="o">=...</span><span class="p">,</span>
         <span class="n">model_type</span><span class="o">=...</span><span class="p">,</span>
         <span class="o">...</span>
      <span class="p">)</span>
      <span class="p">(</span><span class="n">save_directory</span> <span class="o">/</span> <span class="s2">&quot;README.md&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
      <span class="n">torch</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">state_dict</span><span class="p">(),</span> <span class="n">f</span><span class="o">=</span><span class="n">save_directory</span> <span class="o">/</span> <span class="s2">&quot;pytorch_model.bin&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Implement the <code class="docutils literal notranslate"><span class="pre">_from_pretrained</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PyTorchModelHubMixin</span><span class="p">(</span><span class="n">ModelHubMixin</span><span class="p">):</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>

   <span class="nd">@classmethod</span> <span class="c1"># Must be a classmethod!</span>
   <span class="k">def</span><span class="w"> </span><span class="nf">_from_pretrained</span><span class="p">(</span>
      <span class="bp">cls</span><span class="p">,</span>
      <span class="o">*</span><span class="p">,</span>
      <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
      <span class="n">revision</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
      <span class="n">cache_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
      <span class="n">force_download</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
      <span class="n">proxies</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">],</span>
      <span class="n">resume_download</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
      <span class="n">local_files_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
      <span class="n">token</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
      <span class="n">map_location</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">,</span> <span class="c1"># additional argument</span>
      <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="c1"># additional argument</span>
      <span class="o">**</span><span class="n">model_kwargs</span><span class="p">,</span>
   <span class="p">):</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot;Load Pytorch pretrained weights and return the loaded model.&quot;&quot;&quot;</span>
      <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">model_id</span><span class="p">):</span> <span class="c1"># Can either be a local directory</span>
         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading weights from local directory&quot;</span><span class="p">)</span>
         <span class="n">model_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="s2">&quot;pytorch_model.bin&quot;</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span> <span class="c1"># Or a model on the Hub</span>
         <span class="n">model_file</span> <span class="o">=</span> <span class="n">hf_hub_download</span><span class="p">(</span> <span class="c1"># Download from the hub, passing same input args</span>
            <span class="n">repo_id</span><span class="o">=</span><span class="n">model_id</span><span class="p">,</span>
            <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;pytorch_model.bin&quot;</span><span class="p">,</span>
            <span class="n">revision</span><span class="o">=</span><span class="n">revision</span><span class="p">,</span>
            <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">,</span>
            <span class="n">force_download</span><span class="o">=</span><span class="n">force_download</span><span class="p">,</span>
            <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
            <span class="n">resume_download</span><span class="o">=</span><span class="n">resume_download</span><span class="p">,</span>
            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
            <span class="n">local_files_only</span><span class="o">=</span><span class="n">local_files_only</span><span class="p">,</span>
         <span class="p">)</span>

      <span class="c1"># Load model and return - custom logic depending on your framework</span>
      <span class="n">model</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">model_kwargs</span><span class="p">)</span>
      <span class="n">state_dict</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_file</span><span class="p">,</span> <span class="n">map_location</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">map_location</span><span class="p">))</span>
      <span class="n">model</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">state_dict</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
      <span class="n">model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
      <span class="k">return</span> <span class="n">model</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>
<section id="quick-comparison">
<h3>Quick comparison<a class="headerlink" href="#quick-comparison" title="此标题的永久链接">¶</a></h3>
<ol class="arabic">
<li><p>用户体验:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">helpers</span><span class="p">:</span><span class="n">需要加载并推送模型</span><span class="p">,</span><span class="n">代码较复杂</span>
<span class="o">-</span> <span class="n">ModelHubMixin</span><span class="p">:</span><span class="n">直接继承模型类</span><span class="p">,</span><span class="n">用from_pretrained和push_to_hub方法</span><span class="p">,</span><span class="n">更简单直观</span>
</pre></div>
</div>
</li>
<li><p>灵活性:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">helpers</span><span class="p">:</span><span class="n">非常灵活</span><span class="p">,</span><span class="n">可以完全自定义实现</span>
<span class="o">-</span> <span class="n">ModelHubMixin</span><span class="p">:</span><span class="n">不太灵活</span><span class="p">,</span><span class="n">需要框架有模型类</span>
</pre></div>
</div>
</li>
<li><p>维护:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- helpers:需要自行维护配置、新特性等,解决用户报告的issue
- ModelHubMixin:由huggingface_hub包处理大部分交互,维护更少
</pre></div>
</div>
</li>
<li><p>文档/类型注解:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">helpers</span><span class="p">:</span><span class="n">需要手动编写文档和注解</span>
<span class="o">-</span> <span class="n">ModelHubMixin</span><span class="p">:</span><span class="n">部分由huggingface_hub自动生成</span>
</pre></div>
</div>
</li>
</ol>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../../../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Datasets.html" class="btn btn-neutral float-right" title="Datasets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="huggingface_hub.html" class="btn btn-neutral" title="Hugging Face Hub" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  
  <div id="gitalk-container"></div>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2025, 新溪-gordon.

    </p>
  </div>
  <div>备案号 <a href="http://www.beian.miit.gov.cn">京ICP备16018553号</a></div><div>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a></div>. 


</footer>

<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?042289284b8eb33866001347a3e0b129";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>     
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'V2026.01',
            LANGUAGE:'zh-CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/sphinx_highlight.js"></script>
      <script type="text/javascript" src="../../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });


      // var gitalk = new Gitalk({
      //         clientID: '565177626b5d46427009',
      //         clientSecret: 'b2a36e67e1d2a73e43667f46d571c2624f8e1026',
      //         repo: 'knowledge',
      //         owner: 'zhaoweiguo',
      //         admin: ['zhaoweiguo'],
      //         id: location.pathname,      // Ensure uniqueness and length less than 50
      //         distractionFreeMode: false  // Facebook-like distraction free mode
      //       })
      // gitalk.render('gitalk-container')

  </script>


<script type="text/javascript" src="../../../_static/js/table-of-contents-sidebar.js"></script>
<!-- <script type="text/javascript" src="https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/table-of-contents-sidebar.js"></script> -->
<script type="text/javascript">
    window.onload = function(e){
        TableOfContents.init({
            basePath: "https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/",
            querySelector: "body" // or other css querySelector
        });
    }
</script> 

</body>
</html>