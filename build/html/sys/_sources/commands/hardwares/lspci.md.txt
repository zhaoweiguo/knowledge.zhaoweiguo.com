# lspciå‘½ä»¤ä½¿ç”¨

`lspci` æ˜¯ Linux ç³»ç»Ÿä¸‹ä¸€ä¸ªç”¨äºæ˜¾ç¤ºæ‰€æœ‰ PCIï¼ˆPeripheral Component Interconnectï¼Œå¤–å›´ç»„ä»¶äº’è¿ï¼‰æ€»çº¿åŠå…¶è¿æ¥è®¾å¤‡ä¿¡æ¯çš„å‘½ä»¤ã€‚å®ƒå¸¸ç”¨äºç¡¬ä»¶è¯Šæ–­ã€é©±åŠ¨ç¨‹åºé—®é¢˜æ’æŸ¥ã€ç³»ç»Ÿä¿¡æ¯æ”¶é›†ç­‰åœºæ™¯ã€‚


## åŸºæœ¬ç”¨æ³•

### ğŸ”§ åŸºæœ¬è¯­æ³•

```bash
lspci [é€‰é¡¹]
```


### ğŸ“‹ å¸¸ç”¨åŠŸèƒ½è¯´æ˜

| å‘½ä»¤ç¤ºä¾‹                       | åŠŸèƒ½è¯´æ˜                     |
| -------------------------- | ------------------------ |
| `lspci`                    | åˆ—å‡ºç³»ç»Ÿä¸­æ‰€æœ‰çš„ PCI è®¾å¤‡          |
| `lspci -v`                 | æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆverboseï¼‰          |
| `lspci -vv`                | æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ï¼ˆvery verboseï¼‰   |
| `lspci -k`                 | æ˜¾ç¤ºæ¯ä¸ªè®¾å¤‡ä½¿ç”¨çš„å†…æ ¸æ¨¡å—ï¼ˆé©±åŠ¨ç¨‹åºï¼‰      |
| `lspci -nn`                | æ˜¾ç¤ºè®¾å¤‡çš„å‚å•†IDå’Œè®¾å¤‡IDï¼ˆæœ‰åŠ©äºæŸ¥æ‰¾é©±åŠ¨ï¼‰  |
| `lspci -s <åœ°å€>`            | æ˜¾ç¤ºæŒ‡å®šåœ°å€ï¼ˆå¦‚ `00:1f.2`ï¼‰çš„è®¾å¤‡ä¿¡æ¯ |
| `lspci -d <vendor:device>` | æ ¹æ®å‚å•†å’Œè®¾å¤‡ ID è¿‡æ»¤æ˜¾ç¤º          |


### ğŸ” å¸¸è§ç”¨é€”

* æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯ï¼ˆåŒ¹é… `VGA`ï¼‰
* æŸ¥æ‰¾æ— çº¿ç½‘å¡/ç½‘å¡å‹å·
* åˆ¤æ–­é©±åŠ¨ç¨‹åºæ˜¯å¦å·²åŠ è½½ï¼ˆé…åˆ `-k`ï¼‰
* åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œæ— å›¾å½¢ç•Œé¢çš„ç¡¬ä»¶æ£€æŸ¥


### ğŸ“¦ æ³¨æ„äº‹é¡¹

* éœ€è¦ `pciutils` åŒ…æ”¯æŒï¼ˆå¤§å¤šæ•° Linux å‘è¡Œç‰ˆå·²é»˜è®¤å®‰è£…ï¼‰
* æŸäº›ç»†èŠ‚ä¿¡æ¯éœ€è¦ä½¿ç”¨ `sudo` æƒé™è¿è¡Œ
* ä¸ `/proc`ã€`dmesg` ç­‰å‘½ä»¤ç»“åˆä½¿ç”¨å¯è·å–æ›´å®Œæ•´ç¡¬ä»¶ä¿¡æ¯



### è¾“å‡ºæ ¼å¼

æ ¼å¼:

```
<æ€»çº¿åœ°å€> <è®¾å¤‡ç±»å‹>: <å‚å•†åç§°> <è®¾å¤‡åç§°> (<å¯é€‰çš„ç‰ˆæœ¬ä¿¡æ¯>)
```

* æ€»çº¿åœ°å€ï¼šæ ¼å¼æ˜¯ åŸŸ:æ€»çº¿.è®¾å¤‡.åŠŸèƒ½ï¼ˆå¦‚ 00:00.0ï¼‰ï¼Œè¡¨ç¤ºè®¾å¤‡åœ¨ PCI æ‹“æ‰‘ä¸­çš„åœ°å€ã€‚
* è®¾å¤‡ç±»å‹ï¼šå¦‚ Host bridgeã€PCI bridgeã€VGA compatible controller ç­‰ã€‚
* å‚å•†å’Œè®¾å¤‡åç§°ï¼šè®¾å¤‡çš„å‚å•†ï¼ˆå¦‚ Intelã€Red Hatã€NVIDIAï¼‰å’Œå…·ä½“çš„æ§åˆ¶å™¨æˆ–èŠ¯ç‰‡å‹å·ã€‚
* rev xxï¼šè®¾å¤‡çš„ä¿®è®¢ç‰ˆæœ¬ï¼ˆrevisionï¼‰ï¼Œå¯é€‰å­—æ®µã€‚



### è®¾å¤‡ç±»å‹

* æ€»ç»“è¡¨

| è®¾å¤‡ç±»å‹                      | ä¸­æ–‡è§£é‡Š      | å…¸å‹ä½œç”¨            |
| ------------------------- | --------- | --------------- |
| Host bridge               | ä¸»æ¡¥        | CPUä¸å†…å­˜/PCIä¹‹é—´çš„æ¡¥æ¥ |
| PCI bridge                | PCI æ¡¥     | æ‹“å±•æ›´å¤š PCIe æ’æ§½æˆ–è®¾å¤‡ |
| ISA bridge                | ISA æ¡¥     | æ§åˆ¶ä½é€Ÿä¼ ç»Ÿè®¾å¤‡        |
| SATA controller           | ç¡¬ç›˜æ§åˆ¶å™¨     | æ§åˆ¶SATAç¡¬ç›˜/SSD    |
| SMBus controller          | ç³»ç»Ÿç®¡ç†æ€»çº¿æ§åˆ¶å™¨ | è¿æ¥ç”µæ± /ä¼ æ„Ÿå™¨ç­‰ç®¡ç†è®¾å¤‡   |
| VGA compatible controller | æ˜¾å¡ï¼ˆå…¼å®¹VGAï¼‰ | æ˜¾ç¤ºå™¨è¾“å‡º           |
| Ethernet controller       | ç½‘å¡        | ç½‘ç»œé€šä¿¡            |
| Audio device              | å£°å¡        | éŸ³é¢‘è¾“å…¥è¾“å‡º          |
| USB controller            | USB æ§åˆ¶å™¨   | USBè®¾å¤‡çš„è¿æ¥ä¸æ§åˆ¶     |
| SCSI storage controller   | å­˜å‚¨æ§åˆ¶å™¨     | æ§åˆ¶è™šæ‹Ÿç£ç›˜æˆ–ç‰©ç†ç£ç›˜     |
| 3D controller             | GPU       | é«˜æ€§èƒ½å›¾å½¢å¤„ç†         |
| Unclassified device       | æœªåˆ†ç±»è®¾å¤‡     | è™šæ‹Ÿè®¾å¤‡/ç‰¹æ®Šç¡¬ä»¶       |



* 1. **Host bridgeï¼ˆä¸»æ¡¥ï¼‰**
    * **åŠŸèƒ½**ï¼šè¿æ¥ CPU ä¸å†…å­˜/æ€»çº¿ä¹‹é—´çš„æ•°æ®é€šé“ã€‚
    * **å…¸å‹è®¾å¤‡**ï¼šå†…å­˜æ§åˆ¶å™¨ã€CPU ä¸ PCIe çš„æ¡¥æ¥å™¨ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      00:00.0 Host bridge: Intel Corporation 82G33...
      00:04.0 Host bridge: Red Hat, Inc. QEMU PCIe Expander bridge
      ```
* 2. **PCI bridgeï¼ˆPCI æ¡¥ï¼‰**
    * **åŠŸèƒ½**ï¼šè¿æ¥ä¸¤ä¸ª PCI æ€»çº¿æ®µï¼›ä¹Ÿç”¨äºå®ç° PCIe å¤šå±‚æ‹“æ‰‘ã€‚
    * **ç”¨é€”**ï¼šç”¨äºæ‹“å±•å¤šä¸ª PCI è®¾å¤‡æ’æ§½æˆ–è¿æ¥ä¸‹æ¸¸ PCIe è®¾å¤‡ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      00:01.0 PCI bridge: Intel Corporation 7500/5520...
      01:00.0 PCI bridge: Red Hat, Inc. Device 000e
      ```
* 3. **ISA bridgeï¼ˆISA æ¡¥ï¼‰**
    * **åŠŸèƒ½**ï¼šä¼ ç»Ÿä¸Šè¿æ¥ä½é€Ÿè®¾å¤‡ï¼ˆå¦‚ BIOSã€CMOSã€ç”µæ± æ§åˆ¶å™¨ç­‰ï¼‰ï¼Œåœ¨ç°ä»£ä¸»æ¿ä¸­ç”¨äºå…¼å®¹æ€§ç›®çš„ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      00:1f.0 ISA bridge: Intel Corporation 82801IB (ICH9)
      ```

* 4. **SATA controllerï¼ˆSATA æ§åˆ¶å™¨ï¼‰**

    * **åŠŸèƒ½**ï¼šæ§åˆ¶è¿æ¥çš„ SATA ç¡¬ç›˜æˆ– SSDã€‚
    * **æ¨¡å¼**ï¼šé€šå¸¸æ”¯æŒ AHCI æ¨¡å¼ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      00:1f.2 SATA controller: Intel Corporation 82801IR/IO/IH (ICH9R)
      ```

* 5. **SMBus controllerï¼ˆç³»ç»Ÿç®¡ç†æ€»çº¿æ§åˆ¶å™¨ï¼‰**
    * **åŠŸèƒ½**ï¼šç”¨äºä½é€Ÿç³»ç»Ÿç®¡ç†é€šä¿¡ï¼Œå¦‚ä¸ç”µæ± ã€ä¼ æ„Ÿå™¨ã€é£æ‰‡ç­‰äº¤äº’ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      00:1f.3 SMBus: Intel Corporation 82801I
      ```

* 6. **VGA compatible controllerï¼ˆVGA å…¼å®¹å›¾å½¢æ§åˆ¶å™¨ï¼‰**

    * **åŠŸèƒ½**ï¼šå›¾å½¢æ˜¾ç¤ºæ§åˆ¶å™¨ï¼Œå…¼å®¹ VGA æ ‡å‡†ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      02:01.0 VGA compatible controller: Cirrus Logic GD 5446
      ```

* 7. **Ethernet controllerï¼ˆä»¥å¤ªç½‘æ§åˆ¶å™¨ï¼‰**

    * **åŠŸèƒ½**ï¼šç”¨äºç½‘ç»œé€šä¿¡çš„ç½‘å¡è®¾å¤‡ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      02:02.0 Ethernet controller: Red Hat, Inc. Virtio network device
      ```

* 8. **Audio deviceï¼ˆéŸ³é¢‘è®¾å¤‡ï¼‰**

    * **åŠŸèƒ½**ï¼šå¤„ç†éŸ³é¢‘è¾“å…¥è¾“å‡ºï¼ˆé€šå¸¸ä¸º HD Audio æ§åˆ¶å™¨ï¼‰ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      02:03.0 Audio device: Intel Corporation 82801FB...
      ```

* 9. **USB controllerï¼ˆUSB æ§åˆ¶å™¨ï¼‰**
    * **åŠŸèƒ½**ï¼šç®¡ç† USB æ¥å£ï¼Œæ”¯æŒ USB 2.0/3.0/3.1/3.2ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      02:04.0 USB controller: NEC Corporation uPD720200 USB 3.0 Host Controller
      ```

* 10. **SCSI storage controllerï¼ˆSCSI å­˜å‚¨æ§åˆ¶å™¨ï¼‰**
    * **åŠŸèƒ½**ï¼šç”¨äºè¿æ¥ SCSI æˆ– VirtIO çš„å—è®¾å¤‡ï¼Œå¦‚è™šæ‹Ÿç¡¬ç›˜ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      02:05.0 SCSI storage controller: Red Hat, Inc. Virtio block device
      ```

* 11. **3D controllerï¼ˆä¸‰ç»´æ§åˆ¶å™¨ï¼‰**
    * **åŠŸèƒ½**ï¼šç‹¬ç«‹æ˜¾å¡æˆ–ä¸“ç”¨äº 3D æ¸²æŸ“çš„ GPU è®¾å¤‡ã€‚
    * **ä¸ VGA ä¸åŒ**ï¼š3D æ§åˆ¶å™¨ä¸ä¸€å®šæ”¯æŒä¼ ç»Ÿ VGA ä¿¡å·ï¼ˆå¦‚ BIOS å¯åŠ¨ç”»é¢ï¼‰ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      23:00.0 3D controller: NVIDIA Corporation Device 26ba
      ```

* 12. **Unclassified deviceï¼ˆæœªåˆ†ç±»è®¾å¤‡ï¼‰**
    * **åŠŸèƒ½**ï¼šæ²¡æœ‰æ˜ç¡®åˆ†ç±»çš„ PCI è®¾å¤‡ï¼Œå¸¸è§äºè™šæ‹Ÿè®¾å¤‡å¦‚å†…å­˜æ°”çƒã€‚
    * **è®¾å¤‡ç±»ä»£ç **é€šå¸¸ä¸º `00ff`ã€‚
    * **ç¤ºä¾‹**ï¼š

      ```
      02:07.0 Unclassified device [00ff]: Red Hat, Inc. Virtio memory balloon
      ```



---

## ç¤ºä¾‹

* sudo lspci

```
00:00.0 Host bridge: Intel Corporation 82G33/G31/P35/P31 Express DRAM Controller
00:01.0 PCI bridge: Intel Corporation 7500/5520/5500/X58 I/O Hub PCI Express Root Port 0 (rev 02)
00:02.0 PCI bridge: Intel Corporation 7500/5520/5500/X58 I/O Hub PCI Express Root Port 0 (rev 02)
00:03.0 PCI bridge: Intel Corporation 7500/5520/5500/X58 I/O Hub PCI Express Root Port 0 (rev 02)
00:04.0 Host bridge: Red Hat, Inc. QEMU PCIe Expander bridge
00:1f.0 ISA bridge: Intel Corporation 82801IB (ICH9) LPC Interface Controller (rev 02)
00:1f.2 SATA controller: Intel Corporation 82801IR/IO/IH (ICH9R/DO/DH) 6 port SATA Controller [AHCI mode] (rev 02)
00:1f.3 SMBus: Intel Corporation 82801I (ICH9 Family) SMBus Controller (rev 02)
01:00.0 PCI bridge: Red Hat, Inc. Device 000e
02:01.0 VGA compatible controller: Cirrus Logic GD 5446
02:02.0 Ethernet controller: Red Hat, Inc. Virtio network device
02:03.0 Audio device: Intel Corporation 82801FB/FBM/FR/FW/FRW (ICH6 Family) High Definition Audio Controller (rev 01)
02:04.0 USB controller: NEC Corporation uPD720200 USB 3.0 Host Controller (rev 03)
02:05.0 SCSI storage controller: Red Hat, Inc. Virtio block device
02:06.0 SCSI storage controller: Red Hat, Inc. Virtio block device
02:07.0 Unclassified device [00ff]: Red Hat, Inc. Virtio memory balloon
03:00.0 PCI bridge: Red Hat, Inc. Device 000e
05:00.0 PCI bridge: Red Hat, Inc. Device 000e
20:00.0 PCI bridge: Intel Corporation 7500/5520/5500/X58 I/O Hub PCI Express Root Port 0 (rev 02)
21:00.0 PCI bridge: Texas Instruments XIO3130 PCI Express Switch (Upstream) (rev 02)
22:00.0 PCI bridge: Texas Instruments XIO3130 PCI Express Switch (Downstream) (rev 01)
23:00.0 3D controller: NVIDIA Corporation Device 26ba (rev a1)
```




## å‚è€ƒ

* The PCI Utilities: https://mj.ucw.cz/sw/pciutils/



























