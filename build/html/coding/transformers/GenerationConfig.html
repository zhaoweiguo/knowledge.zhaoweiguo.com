

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>


<!-- start added 2025-04-14   增加对markdown中公式的支持 -->
<script>
window.MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
    },
    options: {
        ignoreHtmlClass: "tex2jax_ignore|mathjax_ignore",
        processHtmlClass: "tex2jax_process|mathjax_process|math|output_area"
    }
};
</script>
<script defer="defer" src="https://fastly.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- end added 2025-04-14   增加对markdown中公式的支持 -->


<!-- start added 2025-08-06   增加对mermaid图的支持 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        flowchart: { useMaxWidth: true }
    });
});
</script>
<!--  end added 2025-08-06   增加对mermaid图的支持 -->




  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GenerationConfig &mdash; 新溪-gordon V2026.01 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="GenerationMode" href="GenerationMode.html" />
    <link rel="prev" title="generation" href="generation.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>
  <script src="../_static/js/jquery.min.js"></script>


<!-- 评论插件 gittalk start -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> -->
<!-- 评论插件 gittalk end -->


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> 新溪-gordon
          

          
          </a>

          
            
            
              <div class="version">
                V2026.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">开源代码学习</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../open-tracing.html">open-tracing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../open-tracings/01overview.html">简介</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../MetaGPT.html">MetaGPT</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../MetaGPTs/01overview.html">简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MetaGPTs/prompt.html">Prompt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Llama_index.html">LLamaIndex</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Llama_indexes/llm.html">LLM</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../transformers.html">Transformers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="generation.html">generation</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">GenerationConfig</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GenerationConfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="GenerationMode.html">GenerationMode</a></li>
<li class="toctree-l2"><a class="reference internal" href="WatermarkingConfig.html">WatermarkingConfig</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">新溪-gordon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../transformers.html">Transformers</a> &raquo;</li>
        
          <li><a href="generation.html">generation</a> &raquo;</li>
        
      <li>GenerationConfig</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/transformers/GenerationConfig.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
<section id="generationconfig">
<h1>GenerationConfig<a class="headerlink" href="#generationconfig" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>Version: 4.45.2</p></li>
<li><p>From: src/transformers/generation/configuration_utils.py</p></li>
</ul>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>Class that holds a configuration for a generation task. A <span class="sb">`generate`</span> call supports the following generation methods
for text-decoder, text-to-text, speech-to-text, and vision-to-text models:

<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*greedy decoding*</span> if <span class="sb">`num_beams=1`</span> and <span class="sb">`do_sample=False`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*contrastive search*</span> if <span class="sb">`penalty_alpha&gt;0.`</span> and <span class="sb">`top_k&gt;1`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*multinomial sampling*</span> if <span class="sb">`num_beams=1`</span> and <span class="sb">`do_sample=True`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*beam-search decoding*</span> if <span class="sb">`num_beams&gt;1`</span> and <span class="sb">`do_sample=False`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*beam-search multinomial sampling*</span> if <span class="sb">`num_beams&gt;1`</span> and <span class="sb">`do_sample=True`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*diverse beam-search decoding*</span> if <span class="sb">`num_beams&gt;1`</span> and <span class="sb">`num_beam_groups&gt;1`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*constrained beam-search decoding*</span> if <span class="sb">`constraints!=None`</span> or <span class="sb">`force_words_ids!=None`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*assisted decoding*</span> if <span class="sb">`assistant_model`</span> or <span class="sb">`prompt_lookup_num_tokens`</span> is passed to <span class="sb">`.generate()`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="ge">*dola decoding*</span> if <span class="sb">`dola_layers`</span> is passed to <span class="sb">`.generate()`</span>

To learn more about decoding strategies refer to the [<span class="nt">text generation strategies guide</span>](<span class="na">../generation_strategies</span>).

&lt;Tip&gt;

A large number of these flags control the logits or the stopping criteria of the generation. Make sure you check
the [<span class="nt">generate-related classes</span>](<span class="na">https://huggingface.co/docs/transformers/internal/generation_utils</span>) for a full
description of the possible manipulations, as well as examples of their usage.

&lt;/Tip&gt;

Arg:
<span class="k">    &gt; </span><span class="ge">Parameters that control the length of the output</span>

    max_length (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 20):
        The maximum length the generated tokens can have. Corresponds to the length of the input prompt +
        <span class="sb">`max_new_tokens`</span>. Its effect is overridden by <span class="sb">`max_new_tokens`</span>, if also set.
    max_new_tokens (<span class="sb">`int`</span>, <span class="ge">*optional*</span>):
        The maximum numbers of tokens to generate, ignoring the number of tokens in the prompt.
    min_length (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 0):
        The minimum length of the sequence to be generated. Corresponds to the length of the input prompt +
        <span class="sb">`min_new_tokens`</span>. Its effect is overridden by <span class="sb">`min_new_tokens`</span>, if also set.
    min_new_tokens (<span class="sb">`int`</span>, <span class="ge">*optional*</span>):
        The minimum numbers of tokens to generate, ignoring the number of tokens in the prompt.
    early_stopping (<span class="sb">`bool`</span> or <span class="sb">`str`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Controls the stopping condition for beam-based methods, like beam-search. It accepts the following values:
        <span class="sb">`True`</span>, where the generation stops as soon as there are <span class="sb">`num_beams`</span> complete candidates; <span class="sb">`False`</span>, where an
        heuristic is applied and the generation stops when is it very unlikely to find better candidates;
        <span class="sb">`&quot;never&quot;`</span>, where the beam search procedure only stops when there cannot be better candidates (canonical
        beam search algorithm).
    max_time (<span class="sb">`float`</span>, <span class="ge">*optional*</span>):
        The maximum amount of time you allow the computation to run for in seconds. generation will still finish
        the current pass after allocated time has been passed.
    stop_strings (<span class="sb">`str or List[str]`</span>, <span class="ge">*optional*</span>):
        A string or a list of strings that should terminate generation if the model outputs them.

<span class="k">    &gt; </span><span class="ge">Parameters that control the generation strategy used</span>

    do_sample (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Whether or not to use sampling ; use greedy decoding otherwise.
    num_beams (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 1):
        Number of beams for beam search. 1 means no beam search.
    num_beam_groups (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 1):
        Number of groups to divide <span class="sb">`num_beams`</span> into in order to ensure diversity among different groups of beams.
        [<span class="nt">this paper</span>](<span class="na">https://arxiv.org/pdf/1610.02424.pdf</span>) for more details.
    penalty_alpha (<span class="sb">`float`</span>, <span class="ge">*optional*</span>):
        The values balance the model confidence and the degeneration penalty in contrastive search decoding.
    dola_layers (<span class="sb">`str`</span> or <span class="sb">`List[int]`</span>, <span class="ge">*optional*</span>):
        The layers to use for DoLa decoding. If <span class="sb">`None`</span>, DoLa decoding is not used. If a string, it must
        be one of &quot;low&quot; or &quot;high&quot;, which means using the lower part or higher part of the model layers, respectively.
        &quot;low&quot; means the first half of the layers up to the first 20 layers, and &quot;high&quot; means the last half of the
        layers up to the last 20 layers.
        If a list of integers, it must contain the indices of the layers to use for candidate premature layers in DoLa.
        The 0-th layer is the word embedding layer of the model. Set to <span class="sb">`&#39;low&#39;`</span> to improve long-answer reasoning tasks,
        <span class="sb">`&#39;high&#39;`</span> to improve short-answer tasks. Check the [<span class="nt">documentation</span>](<span class="na">https://github.com/huggingface/transformers/blob/main/docs/source/en/generation_strategies.md</span>)
        or [<span class="nt">the paper</span>](<span class="na">https://arxiv.org/abs/2309.03883</span>) for more details.

<span class="k">    &gt; </span><span class="ge">Parameters that control the cache</span>

    use_cache (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`True`</span>):
        Whether or not the model should use the past last key/values attentions (if applicable to the model) to
        speed up decoding.
    cache_implementation (<span class="sb">`str`</span>, <span class="ge">*optional*</span>, default to <span class="sb">`None`</span>):
        Name of the cache class that will be instantiated in <span class="sb">`generate`</span>, for faster decoding. Possible values are:
        {ALL_CACHE_IMPLEMENTATIONS}. We support other cache types, but they must be manually instantiated and
        passed to <span class="sb">`generate`</span> through the <span class="sb">`past_key_values`</span> argument. See our
        [<span class="nt">cache documentation</span>](<span class="na">https://huggingface.co/docs/transformers/en/kv_cache</span>) for further information.
    cache_config (<span class="sb">`CacheConfig`</span> or <span class="sb">`dict`</span>, <span class="ge">*optional*</span>, default to <span class="sb">`None`</span>):
        Arguments used in the key-value cache class can be passed in <span class="sb">`cache_config`</span>. Can be passed as a <span class="sb">`Dict`</span> and
        it will be converted to its repsective <span class="sb">`CacheConfig`</span> internally.
        Otherwise can be passed as a <span class="sb">`CacheConfig`</span> class matching the indicated <span class="sb">`cache_implementation`</span>.
    return_legacy_cache (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, default to <span class="sb">`True`</span>):
        Whether to return the legacy or new format of the cache when <span class="sb">`DynamicCache`</span> is used by default.

<span class="k">    &gt; </span><span class="ge">Parameters for manipulation of the model output logits</span>

    temperature (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 1.0):
        The value used to modulate the next token probabilities.
    top_k (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 50):
        The number of highest probability vocabulary tokens to keep for top-k-filtering.
    top_p (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 1.0):
        If set to float &lt; 1, only the smallest set of most probable tokens with probabilities that add up to
        <span class="sb">`top_p`</span> or higher are kept for generation.
    min_p (<span class="sb">`float`</span>, <span class="ge">*optional*</span>):
        Minimum token probability, which will be scaled by the probability of the most likely token. It must be a
        value between 0 and 1. Typical values are in the 0.01-0.2 range, comparably selective as setting <span class="sb">`top_p`</span> in
        the 0.99-0.8 range (use the opposite of normal <span class="sb">`top_p`</span> values).
    typical_p (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 1.0):
        Local typicality measures how similar the conditional probability of predicting a target token next is to
        the expected conditional probability of predicting a random token next, given the partial text already
        generated. If set to float &lt; 1, the smallest set of the most locally typical tokens with probabilities that
        add up to <span class="sb">`typical_p`</span> or higher are kept for generation. See [<span class="nt">this</span>
<span class="nt">        paper</span>](<span class="na">https://arxiv.org/pdf/2202.00666.pdf</span>) for more details.
    epsilon_cutoff (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 0.0):
        If set to float strictly between 0 and 1, only tokens with a conditional probability greater than
        <span class="sb">`epsilon_cutoff`</span> will be sampled. In the paper, suggested values range from 3e-4 to 9e-4, depending on the
        size of the model. See [<span class="nt">Truncation Sampling as Language Model</span>
<span class="nt">        Desmoothing</span>](<span class="na">https://arxiv.org/abs/2210.15191</span>) for more details.
    eta_cutoff (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 0.0):
        Eta sampling is a hybrid of locally typical sampling and epsilon sampling. If set to float strictly between
        0 and 1, a token is only considered if it is greater than either <span class="sb">`eta_cutoff`</span> or `sqrt(eta_cutoff) *
        exp(-entropy(softmax(next_token_logits)))`. The latter term is intuitively the expected next token
        probability, scaled by <span class="sb">`sqrt(eta_cutoff)`</span>. In the paper, suggested values range from 3e-4 to 2e-3,
        depending on the size of the model. See [<span class="nt">Truncation Sampling as Language Model</span>
<span class="nt">        Desmoothing</span>](<span class="na">https://arxiv.org/abs/2210.15191</span>) for more details.
    diversity_penalty (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 0.0):
        This value is subtracted from a beam&#39;s score if it generates a token same as any beam from other group at a
        particular time. Note that <span class="sb">`diversity_penalty`</span> is only effective if <span class="sb">`group beam search`</span> is enabled.
    repetition_penalty (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 1.0):
        The parameter for repetition penalty. 1.0 means no penalty. See [<span class="nt">this</span>
<span class="nt">        paper</span>](<span class="na">https://arxiv.org/pdf/1909.05858.pdf</span>) for more details.
    encoder_repetition_penalty (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 1.0):
        The paramater for encoder_repetition_penalty. An exponential penalty on sequences that are not in the
        original input. 1.0 means no penalty.
    length_penalty (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 1.0):
        Exponential penalty to the length that is used with beam-based generation. It is applied as an exponent to
        the sequence length, which in turn is used to divide the score of the sequence. Since the score is the log
        likelihood of the sequence (i.e. negative), <span class="sb">`length_penalty`</span> &gt; 0.0 promotes longer sequences, while
        <span class="sb">`length_penalty`</span> &lt; 0.0 encourages shorter sequences.
    no_repeat_ngram_size (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 0):
        If set to int &gt; 0, all ngrams of that size can only occur once.
    bad_words_ids (<span class="sb">`List[List[int]]`</span>, <span class="ge">*optional*</span>):
        List of list of token ids that are not allowed to be generated. Check
        [<span class="sb">`~generation.NoBadWordsLogitsProcessor`</span>] for further documentation and examples.
    force_words_ids (<span class="sb">`List[List[int]]`</span> or <span class="sb">`List[List[List[int]]]`</span>, <span class="ge">*optional*</span>):
        List of token ids that must be generated. If given a <span class="sb">`List[List[int]]`</span>, this is treated as a simple list of
        words that must be included, the opposite to <span class="sb">`bad_words_ids`</span>. If given <span class="sb">`List[List[List[int]]]`</span>, this
        triggers a [<span class="nt">disjunctive constraint</span>](<span class="na">https://github.com/huggingface/transformers/issues/14081</span>), where one
        can allow different forms of each word.
    renormalize_logits (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Whether to renormalize the logits after applying all the logits processors (including the custom
        ones). It&#39;s highly recommended to set this flag to <span class="sb">`True`</span> as the search algorithms suppose the score logits
        are normalized but some logit processors break the normalization.
    constraints (<span class="sb">`List[Constraint]`</span>, <span class="ge">*optional*</span>):
        Custom constraints that can be added to the generation to ensure that the output will contain the use of
        certain tokens as defined by <span class="sb">`Constraint`</span> objects, in the most sensible way possible.
    forced_bos_token_id (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`model.config.forced_bos_token_id`</span>):
        The id of the token to force as the first generated token after the <span class="sb">`decoder_start_token_id`</span>. Useful for
        multilingual models like [<span class="nt">mBART</span>](<span class="na">../model_doc/mbart</span>) where the first generated token needs to be the target
        language token.
    forced_eos_token_id (<span class="sb">`int`</span> or List[int]`, <span class="ge">*optional*</span>, defaults to <span class="sb">`model.config.forced_eos_token_id`</span>):
        The id of the token to force as the last generated token when <span class="sb">`max_length`</span> is reached. Optionally, use a
        list to set multiple <span class="ge">*end-of-sequence*</span> tokens.
    remove_invalid_values (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`model.config.remove_invalid_values`</span>):
        Whether to remove possible <span class="ge">*nan*</span> and <span class="ge">*inf*</span> outputs of the model to prevent the generation method to crash.
        Note that using <span class="sb">`remove_invalid_values`</span> can slow down generation.
    exponential_decay_length_penalty (<span class="sb">`tuple(int, float)`</span>, <span class="ge">*optional*</span>):
        This Tuple adds an exponentially increasing length penalty, after a certain amount of tokens have been
        generated. The tuple shall consist of: <span class="sb">`(start_index, decay_factor)`</span> where <span class="sb">`start_index`</span> indicates where
        penalty starts and <span class="sb">`decay_factor`</span> represents the factor of exponential decay
    suppress_tokens (<span class="sb">`List[int]`</span>, <span class="ge">*optional*</span>):
        A list of tokens that will be suppressed at generation. The <span class="sb">`SupressTokens`</span> logit processor will set their
        log probs to <span class="sb">`-inf`</span> so that they are not sampled.
    begin_suppress_tokens  (<span class="sb">`List[int]`</span>, <span class="ge">*optional*</span>):
        A list of tokens that will be suppressed at the beginning of the generation. The <span class="sb">`SupressBeginTokens`</span> logit
        processor will set their log probs to <span class="sb">`-inf`</span> so that they are not sampled.
    forced_decoder_ids (<span class="sb">`List[List[int]]`</span>, <span class="ge">*optional*</span>):
        A list of pairs of integers which indicates a mapping from generation indices to token indices that will be
        forced before sampling. For example, <span class="sb">`[[1, 123]]`</span> means the second generated token will always be a token
        of index 123.
    sequence_bias (<span class="sb">`Dict[Tuple[int], float]`</span>, <span class="ge">*optional*</span>)):
        Dictionary that maps a sequence of tokens to its bias term. Positive biases increase the odds of the
        sequence being selected, while negative biases do the opposite. Check
        [<span class="sb">`~generation.SequenceBiasLogitsProcessor`</span>] for further documentation and examples.
    token_healing (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Heal tail tokens of prompts by replacing them with their appropriate extensions.
        This enhances the quality of completions for prompts affected by greedy tokenization bias.
    guidance_scale (<span class="sb">`float`</span>, <span class="ge">*optional*</span>):
        The guidance scale for classifier free guidance (CFG). CFG is enabled by setting <span class="sb">`guidance_scale &gt; 1`</span>.
        Higher guidance scale encourages the model to generate samples that are more closely linked to the input
        prompt, usually at the expense of poorer quality.
    low_memory (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>):
        Switch to sequential beam search and sequential topk for contrastive search to reduce peak memory.
        Used with beam search and contrastive search.
    watermarking_config (<span class="sb">`WatermarkingConfig`</span> or <span class="sb">`dict`</span>, <span class="ge">*optional*</span>):
        Arguments used to watermark the model outputs by adding a small bias to randomly selected set of &quot;green&quot; tokens.
        If passed as <span class="sb">`Dict`</span>, it will be converted to a <span class="sb">`WatermarkingConfig`</span> internally.
        See [<span class="nt">this paper</span>](<span class="na">https://arxiv.org/abs/2306.04634</span>) for more details. Accepts the following keys:
<span class="w">        </span><span class="k">-</span><span class="w"> </span>greenlist_ratio (<span class="sb">`float`</span>):
            Used for watermarking. The ratio of &quot;green&quot; tokens used to the vocabulary size. Defaults to 0.25.
<span class="w">        </span><span class="k">-</span><span class="w"> </span>bias (<span class="sb">`float`</span>):
            Used with watermarking. The bias added to the selected &quot;green&quot; tokens&#39; logits. Defaults to 2.0.
<span class="w">        </span><span class="k">-</span><span class="w"> </span>hashing_key (<span class="sb">`int`</span>):
            Hahsing key used for watermarking. Defaults to 15485863 (the millionth prime).
<span class="w">        </span><span class="k">-</span><span class="w"> </span>seeding_scheme (<span class="sb">`str`</span>):
            Algorithm to use for watermarking. Accepts values:
<span class="w">                </span><span class="k">-</span><span class="w"> </span>&quot;lefthash&quot; (default): &quot;green&quot; tokens selection depend on the last token (Algorithm 2 from the paper)
<span class="w">                </span><span class="k">-</span><span class="w"> </span>&quot;selfhash&quot;: &quot;green&quot; tokens selection depends on the current token itself (Algorithm 3 from the paper)
                    The downside of this scheme is that it considers all possible next tokens and can be slower than &quot;lefthash&quot;.
<span class="w">        </span><span class="k">-</span><span class="w"> </span>context_width (<span class="sb">`int`</span>):
            The context length of previous tokens to use in seeding. Higher context length makes watermarking more robust.

<span class="k">    &gt; </span><span class="ge">Parameters that define the output variables of generate</span>

    num_return_sequences (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 1):
        The number of independently computed returned sequences for each element in the batch.
    output_attentions (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Whether or not to return the attentions tensors of all attention layers. See <span class="sb">`attentions`</span> under returned
        tensors for more details.
    output_hidden_states (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Whether or not to return the hidden states of all layers. See <span class="sb">`hidden_states`</span> under returned tensors for
        more details.
    output_scores (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Whether or not to return the prediction scores. See <span class="sb">`scores`</span> under returned tensors for more details.
    output_logits (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>):
        Whether or not to return the unprocessed prediction logit scores. See <span class="sb">`logits`</span> under returned tensors for
        more details.
    return_dict_in_generate (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Whether or not to return a [<span class="sb">`~utils.ModelOutput`</span>], as opposed to returning exclusively the generated
        sequence. This flag must be set to <span class="sb">`True`</span> to return the generation cache (when <span class="sb">`use_cache`</span> is <span class="sb">`True`</span>)
        or optional outputs (see flags starting with <span class="sb">`output_`</span>)

<span class="k">    &gt; </span><span class="ge">Special tokens that can be used at generation time</span>

    pad_token_id (<span class="sb">`int`</span>, <span class="ge">*optional*</span>):
        The id of the <span class="ge">*padding*</span> token.
    bos_token_id (<span class="sb">`int`</span>, <span class="ge">*optional*</span>):
        The id of the <span class="ge">*beginning-of-sequence*</span> token.
    eos_token_id (<span class="sb">`Union[int, List[int]]`</span>, <span class="ge">*optional*</span>):
        The id of the <span class="ge">*end-of-sequence*</span> token. Optionally, use a list to set multiple <span class="ge">*end-of-sequence*</span> tokens.

<span class="k">    &gt; </span><span class="ge">Generation parameters exclusive to encoder-decoder models</span>

    encoder_no_repeat_ngram_size (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 0):
        If set to int &gt; 0, all ngrams of that size that occur in the <span class="sb">`encoder_input_ids`</span> cannot occur in the
        <span class="sb">`decoder_input_ids`</span>.
    decoder_start_token_id (<span class="sb">`int`</span> or <span class="sb">`List[int]`</span>, <span class="ge">*optional*</span>):
        If an encoder-decoder model starts decoding with a different token than <span class="ge">*bos*</span>, the id of that token or a list of length
        <span class="sb">`batch_size`</span>. Indicating a list enables different start ids for each element in the batch
        (e.g. multilingual models with different target languages in one batch)

<span class="k">    &gt; </span><span class="ge">Generation parameters exclusive to assistant generation</span>
    is_assistant (<span class="sb">`bool`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`False`</span>):
        Whether the model is an assistant (draft) model.
    num_assistant_tokens (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, defaults to 20):
        Defines the number of <span class="ge">_speculative tokens_</span> that shall be generated by the assistant model before being
        checked by the target model at each iteration. Higher values for <span class="sb">`num_assistant_tokens`</span> make the generation
        more <span class="ge">_speculative_</span> : If the assistant model is performant larger speed-ups can be reached, if the assistant
        model requires lots of corrections, lower speed-ups are reached.
    num_assistant_tokens_schedule (<span class="sb">`str`</span>, <span class="ge">*optional*</span>, defaults to <span class="sb">`&quot;constant&quot;`</span>):
        Defines the schedule at which max assistant tokens shall be changed during inference.
<span class="w">        </span><span class="k">-</span><span class="w"> </span><span class="sb">`&quot;heuristic&quot;`</span>: When all speculative tokens are correct, increase <span class="sb">`num_assistant_tokens`</span> by 2 else
          reduce by 1. <span class="sb">`num_assistant_tokens`</span> value is persistent over multiple generation calls with the same assistant model.
<span class="w">        </span><span class="k">-</span><span class="w"> </span><span class="sb">`&quot;heuristic_transient&quot;`</span>: Same as <span class="sb">`&quot;heuristic&quot;`</span> but <span class="sb">`num_assistant_tokens`</span> is reset to its initial value after each generation call.
<span class="w">        </span><span class="k">-</span><span class="w"> </span><span class="sb">`&quot;constant&quot;`</span>: <span class="sb">`num_assistant_tokens`</span> stays unchanged during generation
    assistant_confidence_threshold (<span class="sb">`float`</span>, <span class="ge">*optional*</span>, defaults to 0.4):
        The confidence threshold for the assistant model. If the assistant model&#39;s confidence in its prediction for the current token is lower
        than this threshold, the assistant model stops the current token generation iteration, even if the number of <span class="ge">_speculative tokens_</span>
        (defined by <span class="sb">`num_assistant_tokens`</span>) is not yet reached. It is an unsupervised version of the dynamic speculation lookahead
        from Dynamic Speculation Lookahead Accelerates Speculative Decoding of Large Language Models &lt;https://arxiv.org/abs/2405.04304&gt;.
    prompt_lookup_num_tokens (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, default to <span class="sb">`None`</span>):
        The number of tokens to be output as candidate tokens.
    max_matching_ngram_size (<span class="sb">`int`</span>, <span class="ge">*optional*</span>, default to <span class="sb">`None`</span>):
        The maximum ngram size to be considered for matching in the prompt. Default to 2 if not provided.

<span class="k">    &gt; </span><span class="ge">Wild card</span>

    generation_kwargs:
        Additional generation kwargs will be forwarded to the <span class="sb">`generate`</span> function of the model. Kwargs that are not
        present in <span class="sb">`generate`</span>&#39;s signature will be used in the model forward pass.
</pre></div>
</div>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="GenerationMode.html" class="btn btn-neutral float-right" title="GenerationMode" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="generation.html" class="btn btn-neutral" title="generation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  
  <div id="gitalk-container"></div>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2025, 新溪-gordon.

    </p>
  </div>
  <div>备案号 <a href="http://www.beian.miit.gov.cn">京ICP备16018553号</a></div><div>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a></div>. 


</footer>

<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?042289284b8eb33866001347a3e0b129";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>     
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'V2026.01',
            LANGUAGE:'zh-CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
      <script type="text/javascript" src="../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../_static/copybutton.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });


      // var gitalk = new Gitalk({
      //         clientID: '565177626b5d46427009',
      //         clientSecret: 'b2a36e67e1d2a73e43667f46d571c2624f8e1026',
      //         repo: 'knowledge',
      //         owner: 'zhaoweiguo',
      //         admin: ['zhaoweiguo'],
      //         id: location.pathname,      // Ensure uniqueness and length less than 50
      //         distractionFreeMode: false  // Facebook-like distraction free mode
      //       })
      // gitalk.render('gitalk-container')

  </script>


<script type="text/javascript" src="../_static/js/table-of-contents-sidebar.js"></script>
<!-- <script type="text/javascript" src="https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/table-of-contents-sidebar.js"></script> -->
<script type="text/javascript">
    window.onload = function(e){
        TableOfContents.init({
            basePath: "https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/",
            querySelector: "body" // or other css querySelector
        });
    }
</script> 

</body>
</html>