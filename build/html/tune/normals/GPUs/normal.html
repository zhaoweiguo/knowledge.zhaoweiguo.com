

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>


<!-- start added 2025-04-14   增加对markdown中公式的支持 -->
<script>
window.MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
    },
    options: {
        ignoreHtmlClass: "tex2jax_ignore|mathjax_ignore",
        processHtmlClass: "tex2jax_process|mathjax_process|math|output_area"
    }
};
</script>
<script defer="defer" src="https://fastly.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- end added 2025-04-14   增加对markdown中公式的支持 -->


  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>通用 &mdash; 新溪-gordon V2025.07 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="模型参数计算" href="calc_param.html" />
    <link rel="prev" title="GPU" href="../GPU.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/jquery.min.js"></script>


<!-- 评论插件 gittalk start -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> -->
<!-- 评论插件 gittalk end -->


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> 新溪-gordon
          

          
          </a>

          
            
            
              <div class="version">
                V2025.07
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">性能&amp;调优</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../normal.html">常用</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../indicator.html">常见指标</a></li>
<li class="toctree-l2"><a class="reference internal" href="../normal.html">常用</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../GPU.html">GPU</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">通用</a></li>
<li class="toctree-l3"><a class="reference internal" href="calc_param.html">模型参数计算</a></li>
<li class="toctree-l3"><a class="reference internal" href="calc_TOPS.html">TOPS计算</a></li>
<li class="toctree-l3"><a class="reference internal" href="calc_VRAM.html">GPU显存计算</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../HTTP.html">HTTP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../sla.html">SLA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stress_testing.html">压力测试</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../stress_testings/normal.html">常用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../stress_testings/normals/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stress_testings/normals/concept.html">压测定义</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stress_testings/normals/qps.html">QPS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../system.html">系统级别优化相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../systems/tune_file.html">性能相关</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/tune_tool.html">优化工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/tools/SystemTap.html">SystemTap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/tune_tmp.html">优化相关临时</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tool.html">工具</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/simple.html">简单工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/webbench.html">webbench的使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/ab.html">Apache Bench(ab)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/http_load.html">http_load命令使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/siege.html">siege命令的使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/locust.html">Locust</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/wrk.html">wrk命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/hey.html">hey 命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/ali.html">ali</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/simples/ali.html#vegeta">vegeta</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/tsung.html">Tsung使用文档</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_introduce.html">简单介绍</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_usage.html">简单用法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_advance.html">高级配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_config.html">tsung参考文档说明</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_report.html">tsung参考文档——报告图表含义说明</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_practice.html">Tsung压测实践</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung-1.0-dtd.html">tsung-1.0.dtd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_question.html">常见问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/tsungs/tsung_other.html">其他压测工具</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/jmeter.html">Apache JMeter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/loadRunner.html">LoadRunner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/TCPBurn.html">TCPBurn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/cloudPlatform.html">云平台</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/other.html">其他</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/others/k6.html">k6</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../observe.html">性能观察</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../observes/cpu.html">CPU&amp;内存使用情况查看</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">新溪-gordon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../normal.html">常用</a> &raquo;</li>
        
          <li><a href="../GPU.html">GPU</a> &raquo;</li>
        
      <li>通用</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/normals/GPUs/normal.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            <nav id="local-table-of-contents" role="navigation" aria-labelledby="local-table-of-contents-title">
              <h4 id="local-table-of-contents-title">On This Page</h4>
              <ul>
<li><a class="reference internal" href="#">通用</a><ul>
<li><a class="reference internal" href="#ops">OPS</a><ul>
<li><a class="reference internal" href="#flops-flops">FLOPs 与FLOPS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">参考</a></li>
</ul>
</li>
</ul>

            </nav>
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>通用<a class="headerlink" href="#id1" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>聊天模型生成文本的瓶颈是 <strong>内存带宽</strong> 而不是 <strong>计算能力</strong>，因为它必须为模型生成的每个 token 从内存中读取每一个active parameter。</p></li>
<li><p>这意味着您每秒可以从聊天模型生成的 token 数量通常与它这个表达式成正比：<code class="docutils literal notranslate"><span class="pre">内存总带宽除以模型的大小</span></code></p></li>
<li><p>一个8B的模型，以 bfloat16 精度加载时，模型大小为 ~16GB。这意味着必须为模型生成的每个令牌从内存中读取 16GB。</p></li>
<li><p>总内存带宽：</p>
<ul>
<li><p>消费类 CPU 的 20-100GB/秒</p></li>
<li><p>消费类 GPU、Intel Xeon、AMD Threadripper/Epyc 或高端 Apple Silicon 等专用 CPU 的 200-900GB/秒不等</p></li>
<li><p>数据中心 GPU，如 Nvidia A100 或 H100：高达 2-3TB/秒的</p></li>
</ul>
</li>
<li><p>In our quickstart example above, our model was ~16GB in size when loaded in bfloat16 precision. This means that 16GB must be read from memory for every token generated by the model. Total memory bandwidth can vary from 20-100GB/sec for consumer CPUs to 200-900GB/sec for consumer GPUs, specialized CPUs like Intel Xeon, AMD Threadripper/Epyc or high-end Apple silicon, and finally up to 2-3TB/sec for data center GPUs like the Nvidia A100 or H100. This should give you a good idea of the generation speed you can expect from these different hardware types.</p></li>
</ul>
<p><img alt="" src="https://img.zhaoweiguo.com/uPic/2025/03/pyig7w.png" /></p>
<p>GPU中SRAM和HBM以及CPU DRAM的带宽</p>
<section id="ops">
<h2>OPS<a class="headerlink" href="#ops" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>相关概念:</p>
<ul>
<li><p>FLOPS: floating point operations per second(每秒浮点运算次数, 衡量硬件性能的指标)</p></li>
<li><p>FLOPs: Floating Point Operations(浮点运算次数, 衡量算法/模型的复杂度)</p>
<ul>
<li><p>FLOPs 计算通常是基于 FP32 理论计算图；</p></li>
</ul>
</li>
<li><p>TOPS: Tera Operations Per Second(1 万亿 次操作/秒 = 10¹² ops/sec)</p></li>
<li><p>GOPS: Giga Operations Per Second</p></li>
<li><p>MOPS: Million Operation Per Second</p></li>
<li><p>MACs: Multiply-Accumulate Operations(乘加操作数)</p>
<ul>
<li><p>注意：通常 1 MAC = 2 FLOPs（1 乘法 + 1 加法）</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<section id="flops-flops">
<h3>FLOPs 与FLOPS<a class="headerlink" href="#flops-flops" title="此标题的永久链接">¶</a></h3>
<ul class="simple">
<li><p>关系公式: <span class="math notranslate nohighlight">\(\text{运行时间（秒）} = \frac{\text{FLOPs}}{\text{FLOPS}}\)</span></p></li>
</ul>
</section>
</section>
<section id="id2">
<h2>参考<a class="headerlink" href="#id2" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>Chatting with Transformers: <a class="reference external" href="https://huggingface.co/docs/transformers/main/en/conversations">https://huggingface.co/docs/transformers/main/en/conversations</a></p></li>
<li><p>LLM inference speed of light: <a class="reference external" href="https://zeux.io/2024/03/15/llm-inference-sol/">https://zeux.io/2024/03/15/llm-inference-sol/</a></p></li>
</ul>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="calc_param.html" class="btn btn-neutral float-right" title="模型参数计算" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../GPU.html" class="btn btn-neutral" title="GPU" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  
  <div id="gitalk-container"></div>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2025, 新溪-gordon.

    </p>
  </div>
  <div>备案号 <a href="http://www.beian.miit.gov.cn">京ICP备16018553号</a></div><div>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a></div>. 


</footer>

<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?042289284b8eb33866001347a3e0b129";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>     
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'V2025.07',
            LANGUAGE:'zh-CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script type="text/javascript" src="../../None"></script>
      <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });


      // var gitalk = new Gitalk({
      //         clientID: '565177626b5d46427009',
      //         clientSecret: 'b2a36e67e1d2a73e43667f46d571c2624f8e1026',
      //         repo: 'knowledge',
      //         owner: 'zhaoweiguo',
      //         admin: ['zhaoweiguo'],
      //         id: location.pathname,      // Ensure uniqueness and length less than 50
      //         distractionFreeMode: false  // Facebook-like distraction free mode
      //       })
      // gitalk.render('gitalk-container')

  </script>


<script type="text/javascript" src="../../_static/js/table-of-contents-sidebar.js"></script>
<!-- <script type="text/javascript" src="https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/table-of-contents-sidebar.js"></script> -->
<script type="text/javascript">
    window.onload = function(e){
        TableOfContents.init({
            basePath: "https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/",
            querySelector: "body" // or other css querySelector
        });
    }
</script> 

</body>
</html>