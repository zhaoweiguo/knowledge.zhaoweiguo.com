

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IPsec VPN Server &mdash; 新溪-gordon V1.7.9 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="sshd隧道" href="../ssh.html" />
    <link rel="prev" title="other" href="V2Rays/other.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>



</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> 新溪-gordon
          

          
          </a>

          
            
            
              <div class="version">
                V1.7.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">工具</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../normal.html">开发工具</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/http_server.html">http server工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/http_client.html">http client工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/goreman.html">goreman</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/DNS.html">DNS工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/db.html">DB 工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/pdf.html">PDF 工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../normals/other.html">视频</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../wireshark.html">抓包工具</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../wiresharks/Wireshark.html">Wireshark命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../wiresharks/Charles.html">Charles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../wiresharks/Fiddler.html">Fiddler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../wiresharks/HTTP-Toolkit.html">HTTP Toolkit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../wiresharks/Other.html">其他</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ffmpeg.html">FFmpeg</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ffmpegs/ffmpeg.html">FFmpeg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ffmpegs/docker.html">Docker相关</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ffmpegs/player.html">播放器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ffmpegs/practice.html">实践</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../vpn.html">翻墙技术VPN</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../normal.html">基础</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../website.html">关键网站</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concept.html">定义</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../fanqiang.html">翻墙技术</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../normal.html">常用</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../soft.html">专用软件</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="shadowsock.html">Shadowsock</a></li>
<li class="toctree-l4"><a class="reference internal" href="outline.html">outline</a></li>
<li class="toctree-l4"><a class="reference internal" href="V2Ray.html">V2Ray</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">IPsec VPN Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ssh.html">sshd隧道</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../sshs/ssh.html">启动ssh隧道</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sshs/privoxy.html">privoxy-socks转http代理</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../client.html">客户端</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../clients/shell.html">proxy client使用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clients/browser.html">浏览器代理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clients/soft.html">软件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clients/git.html">git使用ssh隧道翻墙</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clients/ssh.html">ssh使用代理</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dnat.html">端口映射</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dnats/ssh.html">SSH代理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dnats/sshuttle.html">sshuttle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ngrok.html">ngrok </a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tool.html">各类工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/sshuttle.html">sshuttle工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/Drony.html">Drony</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/Droid.html">Droid</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../oray.html">贝锐</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../orays/%E8%92%B2%E5%85%AC%E8%8B%B1.html">蒲公英</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../orays/%E8%8A%B1%E7%94%9F%E5%A3%B3.html">花生壳</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../orays/%E5%90%91%E6%97%A5%E8%91%B5.html">向日葵</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../question.html">常见问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../net.html">网络相关工具</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../nets/NAT.html">NAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nets/cloudflare.html">cloudflare</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../rest-api.html">REST API 客户端</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tool.html">网络上好用的工具</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/Colab.html">Colab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/cron-job.html">cron-job</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/blog.html">博客</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../mqtt.html">MQTT 协议</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../mqtts/broker_emqx.html">Emqtt的使用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_basic.html">Emqtt基本</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_tune.html">Emqtt优化相关</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_command.html">Emqtt使用命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_config.html">Emqtt配置文件</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/configs/emqtt_config_basic.html">Emqtt配置基础</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/configs/emqtt_config_cluster.html">Emqtt集群配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/configs/emqtt_config_vm.html">Emqtt配置vm相关</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/configs/emqtt_config_log.html">Emqtt日志相关配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/configs/emqtt_config_protocol.html">MQTT 协议参数配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/configs/emqtt_config_acl.html">匿名认证与 ACL 文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/configs/emqtt_config_other.html">Emqtt其他配置信息</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_plugin.html">Emqtt插件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_cluster.html">Emqtt分布集群</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_bridge.html">Emqtt节点桥接Bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_userguide.html">Emqtt用户指南 (User Guide)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_design.html">Emqtt架构设计 (Design)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_intro.html">前言</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_architecture.html">架构设计</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_connect_layer.html">Connection连接层</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_session_layer.html">Session会话层</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_routing_layer.html">Routing路由层</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_acl.html">认证和ACL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_hook.html">钩子(Hook)设计</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_plugin.html">Plugin(插件)设计</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mqtts/emqxs/designs/emqtt_design_ets.html">Mnesia/ETS 表设计</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/emqxs/emq_version.html">Emqtt版本</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../mqtts/broker_mosquitto.html">mosquitto的使用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/mosquitto/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/mosquitto/mosquitto_pub.html">mosquitto_pub命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/mosquitto/mosquitto_sub.html">mosquitto_sub命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/mosquitto/Auth.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/mosquitto/config.html">配置文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mqtts/mosquitto/question.html">问题</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../mqtts/broker_VerneMQ.html">VerneMQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mqtts/client_Paho.html">Eclipse Paho</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../chrome.html">chrome相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../chromes/app.html">Chrome应用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../chromes/plugin.html">chrome插件</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../chromes/plugins/normal.html">常用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../chromes/plugins/analysis.html">数据分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../chromes/plugins/develop.html">插件开发 </a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../chromes/tool.html">Chrome Console工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../chromes/question.html">常见问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../chromes/google_doc.html">Google文档</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">新溪-gordon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../vpn.html">翻墙技术VPN</a> &raquo;</li>
        
          <li><a href="../../fanqiang.html">翻墙技术</a> &raquo;</li>
        
          <li><a href="../soft.html">专用软件</a> &raquo;</li>
        
      <li>IPsec VPN Server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/vpns/fanqiangs/softs/setup-ipsec-vpn.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            <nav id="local-table-of-contents" role="navigation" aria-labelledby="local-table-of-contents-title">
              <h4 id="local-table-of-contents-title">On This Page</h4>
              <ul>
<li><a class="reference internal" href="#">IPsec VPN Server</a><ul>
<li><a class="reference internal" href="#server">Server</a><ul>
<li><a class="reference internal" href="#id2">安装</a></li>
<li><a class="reference internal" href="#vpn">卸载 VPN</a></li>
</ul>
</li>
<li><a class="reference internal" href="#client">Client</a><ul>
<li><a class="reference internal" href="#ubuntu">Ubuntu</a></li>
<li><a class="reference internal" href="#os-x">OS X</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">检查日志及 VPN 状态</a></li>
</ul>
</li>
</ul>

            </nav>
  <table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../../../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
<section id="ipsec-vpn-server">
<h1>IPsec VPN Server<a class="headerlink" href="#ipsec-vpn-server" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>Scripts to build your own IPsec VPN server, with IPsec/L2TP, Cisco IPsec and IKEv2: <a class="reference external" href="https://github.com/hwdsl2/setup-ipsec-vpn">https://github.com/hwdsl2/setup-ipsec-vpn</a></p></li>
<li><p>使用 <cite>Libreswan &lt;https://libreswan.org/&gt;</cite> 作为 IPsec 服务器，以及 <cite>xl2tpd &lt;https://github.com/xelerance/xl2tpd&gt;</cite> 作为 L2TP 提供者</p></li>
<li><p>Optional: Install <cite>WireGuard &lt;https://github.com/hwdsl2/wireguard-install&gt;</cite> and/or <cite>OpenVPN &lt;https://github.com/hwdsl2/openvpn-install&gt;</cite> on the same server.</p></li>
</ul>
<section id="server">
<h2>Server<a class="headerlink" href="#server" title="此标题的永久链接">¶</a></h2>
<section id="id2">
<h3>安装<a class="headerlink" href="#id2" title="此标题的永久链接">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>请为 VPN 打开 UDP 端口 500 和 4500</p>
</div>
<p>快速搭建 IPsec VPN 服务器:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">get</span><span class="o">.</span><span class="n">vpnsetup</span><span class="o">.</span><span class="n">net</span> <span class="o">-</span><span class="n">O</span> <span class="n">vpn</span><span class="o">.</span><span class="n">sh</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">sh</span> <span class="n">vpn</span><span class="o">.</span><span class="n">sh</span>

<span class="n">说明</span><span class="p">:</span> <span class="n">Your</span> <span class="n">VPN</span> <span class="n">login</span> <span class="n">details</span> <span class="n">will</span> <span class="n">be</span> <span class="n">randomly</span> <span class="n">generated</span><span class="p">,</span> <span class="ow">and</span> <span class="n">displayed</span> <span class="n">when</span> <span class="n">finished</span><span class="o">.</span>
</pre></div>
</div>
<p>Client configuration is available at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="n">vpnclient</span><span class="o">.</span><span class="n">p12</span> <span class="p">(</span><span class="k">for</span> <span class="n">Windows</span> <span class="o">&amp;</span> <span class="n">Linux</span><span class="p">)</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="n">vpnclient</span><span class="o">.</span><span class="n">sswan</span> <span class="p">(</span><span class="k">for</span> <span class="n">Android</span><span class="p">)</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="n">vpnclient</span><span class="o">.</span><span class="n">mobileconfig</span> <span class="p">(</span><span class="k">for</span> <span class="n">iOS</span> <span class="o">&amp;</span> <span class="n">macOS</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> \
    <span class="o">--</span><span class="n">name</span> <span class="n">ipsec</span><span class="o">-</span><span class="n">vpn</span><span class="o">-</span><span class="n">server</span> \
    <span class="o">--</span><span class="n">restart</span><span class="o">=</span><span class="n">always</span> \
    <span class="o">-</span><span class="n">v</span> <span class="n">ikev2</span><span class="o">-</span><span class="n">vpn</span><span class="o">-</span><span class="n">data</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ipsec</span><span class="o">.</span><span class="n">d</span> \
    <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">modules</span><span class="p">:</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">modules</span><span class="p">:</span><span class="n">ro</span> \
    <span class="o">-</span><span class="n">p</span> <span class="mi">500</span><span class="p">:</span><span class="mi">500</span><span class="o">/</span><span class="n">udp</span> \
    <span class="o">-</span><span class="n">p</span> <span class="mi">4500</span><span class="p">:</span><span class="mi">4500</span><span class="o">/</span><span class="n">udp</span> \
    <span class="o">-</span><span class="n">d</span> <span class="o">--</span><span class="n">privileged</span> \
    <span class="n">hwdsl2</span><span class="o">/</span><span class="n">ipsec</span><span class="o">-</span><span class="n">vpn</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
</section>
<section id="vpn">
<h3>卸载 VPN<a class="headerlink" href="#vpn" title="此标题的永久链接">¶</a></h3>
<p>警告： 此辅助脚本将从你的服务器中删除 IPsec VPN。所有的 VPN 配置将被永久删除，并且 Libreswan 和 xl2tpd 将被移除。此操作不可撤销:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">get</span><span class="o">.</span><span class="n">vpnsetup</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">unst</span> <span class="o">-</span><span class="n">O</span> <span class="n">unst</span><span class="o">.</span><span class="n">sh</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">bash</span> <span class="n">unst</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</section>
</section>
<section id="client">
<h2>Client<a class="headerlink" href="#client" title="此标题的永久链接">¶</a></h2>
<section id="ubuntu">
<h3>Ubuntu<a class="headerlink" href="#ubuntu" title="此标题的永久链接">¶</a></h3>
<p>安装:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">network</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">strongswan</span>
</pre></div>
</div>
<p>基于p12生成证书:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openssl</span> <span class="n">pkcs12</span> <span class="o">-</span><span class="ow">in</span> <span class="n">vpnclient</span><span class="o">.</span><span class="n">p12</span> <span class="o">-</span><span class="n">cacerts</span> <span class="o">-</span><span class="n">nokeys</span> <span class="o">-</span><span class="n">out</span> <span class="n">ca</span><span class="o">.</span><span class="n">cer</span>
<span class="n">openssl</span> <span class="n">pkcs12</span> <span class="o">-</span><span class="ow">in</span> <span class="n">vpnclient</span><span class="o">.</span><span class="n">p12</span> <span class="o">-</span><span class="n">clcerts</span> <span class="o">-</span><span class="n">nokeys</span> <span class="o">-</span><span class="n">out</span> <span class="n">client</span><span class="o">.</span><span class="n">cer</span>
<span class="n">openssl</span> <span class="n">pkcs12</span> <span class="o">-</span><span class="ow">in</span> <span class="n">vpnclient</span><span class="o">.</span><span class="n">p12</span> <span class="o">-</span><span class="n">nocerts</span> <span class="o">-</span><span class="n">nodes</span>  <span class="o">-</span><span class="n">out</span> <span class="n">client</span><span class="o">.</span><span class="n">key</span>

<span class="n">sudo</span> <span class="n">chown</span> <span class="n">root</span><span class="o">.</span><span class="n">root</span> <span class="n">ca</span><span class="o">.</span><span class="n">cer</span> <span class="n">client</span><span class="o">.</span><span class="n">cer</span> <span class="n">client</span><span class="o">.</span><span class="n">key</span>
<span class="n">sudo</span> <span class="n">chmod</span> <span class="mi">600</span> <span class="n">ca</span><span class="o">.</span><span class="n">cer</span> <span class="n">client</span><span class="o">.</span><span class="n">cer</span> <span class="n">client</span><span class="o">.</span><span class="n">key</span>
</pre></div>
</div>
<p>You can then set up and enable the VPN connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">01.</span> <span class="n">Go</span> <span class="n">to</span> <span class="n">Settings</span> <span class="o">-&gt;</span> <span class="n">Network</span> <span class="o">-&gt;</span> <span class="n">VPN</span><span class="o">.</span> <span class="n">Click</span> <span class="n">the</span> <span class="o">+</span> <span class="n">button</span><span class="o">.</span>
<span class="mf">02.</span> <span class="n">Select</span> <span class="n">IPsec</span><span class="o">/</span><span class="n">IKEv2</span> <span class="p">(</span><span class="n">strongswan</span><span class="p">)</span><span class="o">.</span>
<span class="mf">03.</span> <span class="n">Enter</span> <span class="n">anything</span> <span class="n">you</span> <span class="n">like</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Name</span> <span class="n">field</span><span class="o">.</span>
<span class="mf">04.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">Gateway</span> <span class="p">(</span><span class="n">Server</span><span class="p">)</span> <span class="n">section</span><span class="p">,</span> <span class="n">enter</span> <span class="n">Your</span> <span class="n">VPN</span> <span class="n">Server</span> <span class="n">IP</span> <span class="p">(</span><span class="ow">or</span> <span class="n">DNS</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Address</span><span class="o">.</span>
<span class="mf">05.</span> <span class="n">Select</span> <span class="n">the</span> <span class="n">ca</span><span class="o">.</span><span class="n">cer</span> <span class="n">file</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Certificate</span><span class="o">.</span>
<span class="mf">06.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">Client</span> <span class="n">section</span><span class="p">,</span> <span class="n">select</span> <span class="n">Certificate</span><span class="p">(</span><span class="o">/</span><span class="n">private</span> <span class="n">key</span><span class="p">)</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Authentication</span> <span class="n">drop</span><span class="o">-</span><span class="n">down</span> <span class="n">menu</span><span class="o">.</span>
<span class="mf">07.</span> <span class="n">Select</span> <span class="n">Certificate</span><span class="o">/</span><span class="n">private</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Certificate</span> <span class="n">drop</span><span class="o">-</span><span class="n">down</span> <span class="n">menu</span> <span class="p">(</span><span class="k">if</span> <span class="n">exists</span><span class="p">)</span><span class="o">.</span>
<span class="mf">08.</span> <span class="n">Select</span> <span class="n">the</span> <span class="n">client</span><span class="o">.</span><span class="n">cer</span> <span class="n">file</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Certificate</span> <span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span>
<span class="mf">09.</span> <span class="n">Select</span> <span class="n">the</span> <span class="n">client</span><span class="o">.</span><span class="n">key</span> <span class="n">file</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Private</span> <span class="n">key</span><span class="o">.</span>
<span class="mf">10.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">Options</span> <span class="n">section</span><span class="p">,</span> <span class="n">check</span> <span class="n">the</span> <span class="n">Request</span> <span class="n">an</span> <span class="n">inner</span> <span class="n">IP</span> <span class="n">address</span> <span class="n">checkbox</span><span class="o">.</span>
<span class="mf">11.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">Cipher</span> <span class="n">proposals</span> <span class="p">(</span><span class="n">Algorithms</span><span class="p">)</span> <span class="n">section</span><span class="p">,</span> <span class="n">check</span> <span class="n">the</span> <span class="n">Enable</span> <span class="n">custom</span> <span class="n">proposals</span> <span class="n">checkbox</span><span class="o">.</span>
<span class="mf">12.</span> <span class="n">Leave</span> <span class="n">the</span> <span class="n">IKE</span> <span class="n">field</span> <span class="n">blank</span><span class="o">.</span>
<span class="mf">13.</span> <span class="n">Enter</span> <span class="n">aes128gcm16</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">ESP</span> <span class="n">field</span><span class="o">.</span>
<span class="mf">14.</span> <span class="n">Click</span> <span class="n">Add</span> <span class="n">to</span> <span class="n">save</span> <span class="n">the</span> <span class="n">VPN</span> <span class="n">connection</span> <span class="n">information</span><span class="o">.</span>
<span class="mf">15.</span> <span class="n">Turn</span> <span class="n">the</span> <span class="n">VPN</span> <span class="n">switch</span> <span class="n">ON</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="os-x">
<h3>OS X<a class="headerlink" href="#os-x" title="此标题的永久链接">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>01. 打开系统偏好设置并转到网络部分。
02. 在窗口左下角单击 + 按钮。
03. 从 接口 下拉菜单选择 VPN。
04. 从 VPN 类型 下拉菜单选择 IPSec 上的 L2TP。
05. 在 服务名称 字段中输入任意内容。
06. 单击 创建。
07. 在 服务器地址 字段中输入你的 VPN 服务器 IP。
08. 在 帐户名称 字段中输入你的 VPN 用户名。
09. 单击 认证设置 按钮。
10. 在 用户认证 部分，选择 密码 单选按钮，然后输入你的 VPN 密码。
11. 在 机器认证 部分，选择 共享的密钥 单选按钮，然后输入你的 VPN IPsec PSK。
12. 保持 群组名称 字段空白。
13. 单击 好。
14. 选中 在菜单栏中显示 VPN 状态 复选框。
15. （重要） 单击 高级 按钮，并选中 通过 VPN 连接发送所有通信 复选框。
16. （重要） 单击 TCP/IP 选项卡，并在 配置 IPv6 部分中选择 仅本地链接。
17. 单击 好 关闭高级设置，然后单击 应用 保存 VPN 连接信息。
</pre></div>
</div>
</section>
</section>
<section id="id3">
<h2>检查日志及 VPN 状态<a class="headerlink" href="#id3" title="此标题的永久链接">¶</a></h2>
<p>重启 VPN 服务器上的相关服务:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">service</span> <span class="n">ipsec</span> <span class="n">restart</span>
<span class="n">sudo</span> <span class="n">service</span> <span class="n">xl2tpd</span> <span class="n">restart</span>
</pre></div>
</div>
<p>检查 Libreswan (IPsec) 和 xl2tpd 日志是否有错误:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ubuntu &amp; Debian</span>
<span class="n">grep</span> <span class="n">pluto</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">auth</span><span class="o">.</span><span class="n">log</span>
<span class="n">grep</span> <span class="n">xl2tpd</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">syslog</span>
<span class="o">=&gt;</span>
<span class="n">tail</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">auth</span><span class="o">.</span><span class="n">log</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">pluto</span>



<span class="c1"># CentOS/RHEL, Rocky Linux, AlmaLinux, Oracle Linux &amp; Amazon Linux 2</span>
<span class="n">grep</span> <span class="n">pluto</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">secure</span>
<span class="n">grep</span> <span class="n">xl2tpd</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">messages</span>
</pre></div>
</div>
<p>检查服务状态:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>检查 IPsec VPN 服务器状态：
sudo ipsec status

查看当前已建立的 VPN 连接：
sudo ipsec trafficstatus
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// ===========&gt; 检查 IPsec VPN 服务器状态 &lt;==========
$ sudo ipsec status
000 using kernel interface: xfrm
000
000 interface lo UDP [::1]:4500
000 interface lo UDP [::1]:500
000 interface lo UDP 127.0.0.1:4500
000 interface lo UDP 127.0.0.1:500
000 interface eth0 UDP 172.31.8.176:4500
000 interface eth0 UDP 172.31.8.176:500
000 interface docker0 UDP 172.17.0.1:4500
000 interface docker0 UDP 172.17.0.1:500
000
000 fips mode=disabled;
000 SElinux=disabled
000 seccomp=unsupported
000
000 config setup options:
000
000 configdir=/etc, configfile=/etc/ipsec.conf, secrets=/etc/ipsec.secrets, ipsecdir=/etc/ipsec.d
000 nssdir=/etc/ipsec.d, dumpdir=/run/pluto, statsbin=unset
000 sbindir=/usr/local/sbin, libexecdir=/usr/local/libexec/ipsec
000 pluto_version=4.11, pluto_vendorid=OE-Libreswan-4.11, audit-log=yes
000 nhelpers=-1, uniqueids=no, dnssec-enable=no, logappend=yes, logip=yes, shuntlifetime=900s, xfrmlifetime=30s
000 ddos-cookies-threshold=25000, ddos-max-halfopen=50000, ddos-mode=auto, ikev1-policy=accept
000 ikebuf=0, msg_errqueue=yes, crl-strict=no, crlcheckinterval=0, listen=&lt;any&gt;, nflog-all=0
000 ocsp-enable=no, ocsp-strict=no, ocsp-timeout=2, ocsp-uri=&lt;unset&gt;
000 ocsp-trust-name=&lt;unset&gt;
000 ocsp-cache-size=1000, ocsp-cache-min-age=3600, ocsp-cache-max-age=86400, ocsp-method=get
000 global-redirect=no, global-redirect-to=&lt;unset&gt;
000 secctx-attr-type=&lt;unsupported&gt;
000 debug:
000
000 nat-traversal=yes, keep-alive=20, nat-ikeport=4500
000 virtual-private (%priv):
000 - allowed subnets: 10.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12
000 - excluded subnets: 192.168.42.0/24, 192.168.43.0/24
000
000 Kernel algorithms supported:
000
000 algorithm ESP encrypt: name=3DES_CBC, keysizemin=192, keysizemax=192
000 algorithm ESP encrypt: name=AES_CBC, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=AES_CCM_12, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=AES_CCM_16, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=AES_CCM_8, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=AES_CTR, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=AES_GCM_12, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=AES_GCM_16, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=AES_GCM_8, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=CAMELLIA_CBC, keysizemin=128, keysizemax=256
000 algorithm ESP encrypt: name=CHACHA20_POLY1305, keysizemin=256, keysizemax=256
000 algorithm ESP encrypt: name=NULL, keysizemin=0, keysizemax=0
000 algorithm ESP encrypt: name=NULL_AUTH_AES_GMAC, keysizemin=128, keysizemax=256
000 algorithm AH/ESP auth: name=AES_CMAC_96, key-length=128
000 algorithm AH/ESP auth: name=AES_XCBC_96, key-length=128
000 algorithm AH/ESP auth: name=HMAC_MD5_96, key-length=128
000 algorithm AH/ESP auth: name=HMAC_SHA1_96, key-length=160
000 algorithm AH/ESP auth: name=HMAC_SHA2_256_128, key-length=256
000 algorithm AH/ESP auth: name=HMAC_SHA2_256_TRUNCBUG, key-length=256
000 algorithm AH/ESP auth: name=HMAC_SHA2_384_192, key-length=384
000 algorithm AH/ESP auth: name=HMAC_SHA2_512_256, key-length=512
000 algorithm AH/ESP auth: name=NONE, key-length=0
000
000 IKE algorithms supported:
000
000 algorithm IKE encrypt: v1id=5, v1name=OAKLEY_3DES_CBC, v2id=3, v2name=3DES, blocksize=8, keydeflen=192
000 algorithm IKE encrypt: v1id=8, v1name=OAKLEY_CAMELLIA_CBC, v2id=23, v2name=CAMELLIA_CBC, blocksize=16, keydeflen=128
000 algorithm IKE encrypt: v1id=-1, v1name=n/a, v2id=20, v2name=AES_GCM_C, blocksize=16, keydeflen=128
000 algorithm IKE encrypt: v1id=-1, v1name=n/a, v2id=19, v2name=AES_GCM_B, blocksize=16, keydeflen=128
000 algorithm IKE encrypt: v1id=-1, v1name=n/a, v2id=18, v2name=AES_GCM_A, blocksize=16, keydeflen=128
000 algorithm IKE encrypt: v1id=13, v1name=OAKLEY_AES_CTR, v2id=13, v2name=AES_CTR, blocksize=16, keydeflen=128
000 algorithm IKE encrypt: v1id=7, v1name=OAKLEY_AES_CBC, v2id=12, v2name=AES_CBC, blocksize=16, keydeflen=128
000 algorithm IKE encrypt: v1id=-1, v1name=n/a, v2id=28, v2name=CHACHA20_POLY1305, blocksize=16, keydeflen=256
000 algorithm IKE PRF: name=HMAC_MD5, hashlen=16
000 algorithm IKE PRF: name=HMAC_SHA1, hashlen=20
000 algorithm IKE PRF: name=HMAC_SHA2_256, hashlen=32
000 algorithm IKE PRF: name=HMAC_SHA2_384, hashlen=48
000 algorithm IKE PRF: name=HMAC_SHA2_512, hashlen=64
000 algorithm IKE PRF: name=AES_XCBC, hashlen=16
000 algorithm IKE DH Key Exchange: name=MODP1024, bits=1024
000 algorithm IKE DH Key Exchange: name=MODP1536, bits=1536
000 algorithm IKE DH Key Exchange: name=MODP2048, bits=2048
000 algorithm IKE DH Key Exchange: name=MODP3072, bits=3072
000 algorithm IKE DH Key Exchange: name=MODP4096, bits=4096
000 algorithm IKE DH Key Exchange: name=MODP6144, bits=6144
000 algorithm IKE DH Key Exchange: name=MODP8192, bits=8192
000 algorithm IKE DH Key Exchange: name=DH19, bits=512
000 algorithm IKE DH Key Exchange: name=DH20, bits=768
000 algorithm IKE DH Key Exchange: name=DH21, bits=1056
000 algorithm IKE DH Key Exchange: name=DH31, bits=256
000
000 stats db_ops: {curr_cnt, total_cnt, maxsz} :context={0,0,0} trans={0,0,0} attrs={0,0,0}
000
000 Connection list:
000
000 &quot;ikev2-cp&quot;: 0.0.0.0/0===172.31.8.176[3.11.211.57,MS+S=C]---172.31.0.1...%any[%fromcert,+MC+S=C]; unrouted; eroute owner: #0
000 &quot;ikev2-cp&quot;:     oriented; my_ip=unset; their_ip=unset; mycert=3.11.211.57; my_updown=ipsec _updown;
000 &quot;ikev2-cp&quot;:   xauth us:none, xauth them:none,  my_username=[any]; their_username=[any]
000 &quot;ikev2-cp&quot;:   our auth:rsasig(RSASIG+RSASIG_v1_5), their auth:RSASIG+ECDSA+RSASIG_v1_5, our autheap:none, their autheap:none;
000 &quot;ikev2-cp&quot;:   modecfg info: us:server, them:client, modecfg policy:push, dns:8.8.8.8, 8.8.4.4, domains:unset, cat:unset;
000 &quot;ikev2-cp&quot;:   sec_label:unset;
000 &quot;ikev2-cp&quot;:   CAs: &#39;CN=IKEv2 VPN CA, O=IKEv2 VPN&#39;...&#39;CN=IKEv2 VPN CA, O=IKEv2 VPN&#39;
000 &quot;ikev2-cp&quot;:   ike_life: 86400s; ipsec_life: 86400s; ipsec_max_bytes: 2^63B; ipsec_max_packets: 2^63; replay_window: 128; rekey_margin: 540s; rekey_fuzz: 100%; keyingtries: 0;
000 &quot;ikev2-cp&quot;:   retransmit-interval: 500ms; retransmit-timeout: 300s; iketcp:no; iketcp-port:4500;
000 &quot;ikev2-cp&quot;:   initial-contact:no; cisco-unity:no; fake-strongswan:no; send-vendorid:no; send-no-esp-tfc:no;
000 &quot;ikev2-cp&quot;:   policy: IKEv2+RSASIG+ECDSA+RSASIG_v1_5+ENCRYPT+TUNNEL+DONT_REKEY+IKEV2_ALLOW_NARROWING+IKE_FRAG_ALLOW+ESN_NO+ESN_YES;
000 &quot;ikev2-cp&quot;:   v2-auth-hash-policy: SHA2_256+SHA2_384+SHA2_512;
000 &quot;ikev2-cp&quot;:   conn_prio: 0,0; interface: eth0; metric: 0; mtu: unset; sa_prio:auto; sa_tfc:none;
000 &quot;ikev2-cp&quot;:   nflog-group: unset; mark: unset; vti-iface:unset; vti-routing:no; vti-shared:no; nic-offload:auto;
000 &quot;ikev2-cp&quot;:   our idtype: ID_IPV4_ADDR; our id=3.11.211.57; their idtype: %fromcert; their id=%fromcert
000 &quot;ikev2-cp&quot;:   liveness: active; dpdaction:clear; dpddelay:30s; retransmit-timeout:300s
000 &quot;ikev2-cp&quot;:   nat-traversal: encaps:yes; keepalive:20s
000 &quot;ikev2-cp&quot;:   newest IKE SA: #0; newest IPsec SA: #0; conn serial: $3;
000 &quot;ikev2-cp&quot;:   IKE algorithms: AES_CBC_256-HMAC_SHA2_256-MODP2048+MODP3072+MODP4096+MODP8192+DH19+DH20+DH21+DH31, AES_CBC_128-HMAC_SHA2_256-MODP2048+MODP3072+MODP4096+MODP8192+DH19+DH20+DH21+DH31, AES_CBC_256-HMAC_SHA1-MODP2048+MODP3072+MODP4096+MODP8192+DH19+DH20+DH21+DH31, AES_CBC_128-HMAC_SHA1-MODP2048+MODP3072+MODP4096+MODP8192+DH19+DH20+DH21+DH31
000 &quot;ikev2-cp&quot;:   ESP algorithms: AES_GCM_16-NONE, AES_CBC_128-HMAC_SHA1_96, AES_CBC_256-HMAC_SHA1_96, AES_CBC_128-HMAC_SHA2_256_128, AES_CBC_256-HMAC_SHA2_256_128
000 &quot;l2tp-psk&quot;: 172.31.8.176/32:UDP/1701===172.31.8.176[3.11.211.57]---172.31.0.1...%any===0.0.0.0/0:UDP/0-65535; unrouted; eroute owner: #0
000 &quot;l2tp-psk&quot;:     oriented; my_ip=unset; their_ip=unset; my_updown=ipsec _updown;
000 &quot;l2tp-psk&quot;:   xauth us:none, xauth them:none,  my_username=[any]; their_username=[any]
000 &quot;l2tp-psk&quot;:   our auth:secret, their auth:secret, our autheap:none, their autheap:none;
000 &quot;l2tp-psk&quot;:   modecfg info: us:none, them:none, modecfg policy:push, dns:unset, domains:unset, cat:unset;
000 &quot;l2tp-psk&quot;:   sec_label:unset;
000 &quot;l2tp-psk&quot;:   ike_life: 86400s; ipsec_life: 86400s; ipsec_max_bytes: 2^63B; ipsec_max_packets: 2^63; replay_window: 128; rekey_margin: 540s; rekey_fuzz: 100%; keyingtries: 5;
000 &quot;l2tp-psk&quot;:   retransmit-interval: 500ms; retransmit-timeout: 60s; iketcp:no; iketcp-port:4500;
000 &quot;l2tp-psk&quot;:   initial-contact:no; cisco-unity:no; fake-strongswan:no; send-vendorid:no; send-no-esp-tfc:no;
000 &quot;l2tp-psk&quot;:   policy: IKEv1+PSK+ENCRYPT+DONT_REKEY+IKE_FRAG_ALLOW+ESN_NO+ESN_YES;
000 &quot;l2tp-psk&quot;:   conn_prio: 32,0; interface: eth0; metric: 0; mtu: unset; sa_prio:auto; sa_tfc:none;
000 &quot;l2tp-psk&quot;:   nflog-group: unset; mark: unset; vti-iface:unset; vti-routing:no; vti-shared:no; nic-offload:auto;
000 &quot;l2tp-psk&quot;:   our idtype: ID_IPV4_ADDR; our id=3.11.211.57; their idtype: %none; their id=(none)
000 &quot;l2tp-psk&quot;:   dpd: active; action:clear; delay:30s; timeout:300s
000 &quot;l2tp-psk&quot;:   nat-traversal: encaps:yes; keepalive:20s; ikev1-method:rfc+drafts
000 &quot;l2tp-psk&quot;:   newest ISAKMP SA: #0; newest IPsec SA: #0; conn serial: $1;
000 &quot;l2tp-psk&quot;:   IKE algorithms: AES_CBC_256-HMAC_SHA2_256-MODP2048, AES_CBC_128-HMAC_SHA2_256-MODP2048, AES_CBC_256-HMAC_SHA1-MODP2048, AES_CBC_128-HMAC_SHA1-MODP2048
000 &quot;l2tp-psk&quot;:   ESP algorithms: AES_GCM_16-NONE, AES_CBC_128-HMAC_SHA1_96, AES_CBC_256-HMAC_SHA1_96, AES_CBC_256-HMAC_SHA2_512_256, AES_CBC_128-HMAC_SHA2_256_128, AES_CBC_256-HMAC_SHA2_256_128
000 &quot;xauth-psk&quot;: 0.0.0.0/0===172.31.8.176[3.11.211.57,MS+XS+S=C]---172.31.0.1...%any[+MC+XC+S=C]; unrouted; eroute owner: #0
000 &quot;xauth-psk&quot;:     oriented; my_ip=unset; their_ip=unset; my_updown=ipsec _updown;
000 &quot;xauth-psk&quot;:   xauth us:server, xauth them:client, xauthby:file; my_username=[any]; their_username=[any]
000 &quot;xauth-psk&quot;:   our auth:secret, their auth:secret, our autheap:none, their autheap:none;
000 &quot;xauth-psk&quot;:   modecfg info: us:server, them:client, modecfg policy:pull, dns:8.8.8.8, 8.8.4.4, domains:unset, cat:unset;
000 &quot;xauth-psk&quot;:   sec_label:unset;
000 &quot;xauth-psk&quot;:   ike_life: 86400s; ipsec_life: 86400s; ipsec_max_bytes: 2^63B; ipsec_max_packets: 2^63; replay_window: 128; rekey_margin: 540s; rekey_fuzz: 100%; keyingtries: 5;
000 &quot;xauth-psk&quot;:   retransmit-interval: 500ms; retransmit-timeout: 60s; iketcp:no; iketcp-port:4500;
000 &quot;xauth-psk&quot;:   initial-contact:no; cisco-unity:yes; fake-strongswan:no; send-vendorid:no; send-no-esp-tfc:no;
000 &quot;xauth-psk&quot;:   policy: IKEv1+PSK+ENCRYPT+TUNNEL+DONT_REKEY+XAUTH+MODECFG_PULL+IKE_FRAG_ALLOW+ESN_NO+ESN_YES;
000 &quot;xauth-psk&quot;:   conn_prio: 0,0; interface: eth0; metric: 0; mtu: unset; sa_prio:auto; sa_tfc:none;
000 &quot;xauth-psk&quot;:   nflog-group: unset; mark: unset; vti-iface:unset; vti-routing:no; vti-shared:no; nic-offload:auto;
000 &quot;xauth-psk&quot;:   our idtype: ID_IPV4_ADDR; our id=3.11.211.57; their idtype: %none; their id=(none)
000 &quot;xauth-psk&quot;:   dpd: active; action:clear; delay:30s; timeout:300s
000 &quot;xauth-psk&quot;:   nat-traversal: encaps:yes; keepalive:20s; ikev1-method:rfc+drafts
000 &quot;xauth-psk&quot;:   newest ISAKMP SA: #0; newest IPsec SA: #0; conn serial: $2;
000 &quot;xauth-psk&quot;:   IKE algorithms: AES_CBC_256-HMAC_SHA2_256-MODP2048, AES_CBC_128-HMAC_SHA2_256-MODP2048, AES_CBC_256-HMAC_SHA1-MODP2048, AES_CBC_128-HMAC_SHA1-MODP2048
000 &quot;xauth-psk&quot;:   ESP algorithms: AES_GCM_16-NONE, AES_CBC_128-HMAC_SHA1_96, AES_CBC_256-HMAC_SHA1_96, AES_CBC_256-HMAC_SHA2_512_256, AES_CBC_128-HMAC_SHA2_256_128, AES_CBC_256-HMAC_SHA2_256_128
000
000 Total IPsec connections: loaded 3, active 0
000
000 State Information: DDoS cookies not required, Accepting new IKE connections
000 IKE SAs: total(0), half-open(0), open(0), authenticated(0), anonymous(0)
000 IPsec SAs: total(0), authenticated(0), anonymous(0)
000
000 Bare Shunt list:
000




// ===========&gt; 查看当前已建立的 VPN 连接 &lt;==============
$ sudo ipsec trafficstatus


























































</pre></div>
</div>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="/index.html">主页</a></p></td>
<td><p><a class="reference internal" href="../../../genindex.html"><span class="std std-ref">索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../py-modindex.html"><span class="std std-ref">模块索引</span></a></p></td>
<td><p><a class="reference internal" href="../../../search.html"><span class="std std-ref">搜索页面</span></a></p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ssh.html" class="btn btn-neutral float-right" title="sshd隧道" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="V2Rays/other.html" class="btn btn-neutral" title="other" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  
  <div id="gitalk-container"></div>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2024, 新溪-gordon.

    </p>
  </div>
  <div>备案号 <a href="http://www.beian.miit.gov.cn">京ICP备16018553号</a></div><div>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a></div>. 


</footer>

<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?042289284b8eb33866001347a3e0b129";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>     
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'V1.7.9',
            LANGUAGE:'zh-CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/sphinx_highlight.js"></script>
      <script type="text/javascript" src="../../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });


      var gitalk = new Gitalk({
              clientID: '565177626b5d46427009',
              clientSecret: 'b2a36e67e1d2a73e43667f46d571c2624f8e1026',
              repo: 'knowledge',
              owner: 'zhaoweiguo',
              admin: ['zhaoweiguo'],
              id: location.pathname,      // Ensure uniqueness and length less than 50
              distractionFreeMode: false  // Facebook-like distraction free mode
            })
      gitalk.render('gitalk-container')

  </script>


<script type="text/javascript" src="../../../_static/js/table-of-contents-sidebar.js"></script>
<!-- <script type="text/javascript" src="https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/table-of-contents-sidebar.js"></script> -->
<script type="text/javascript">
    window.onload = function(e){
        TableOfContents.init({
            basePath: "https://table-of-contents-sidebar.github.io/table-of-contents-sidebar-lib/",
            querySelector: "body" // or other css querySelector
        });
    }
</script> 

</body>
</html>